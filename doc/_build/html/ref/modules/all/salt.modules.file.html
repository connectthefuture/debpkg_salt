
<!DOCTYPE html>








<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>salt.modules.file</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="google-site-verification" content="1Y-ojT3ndjxA9coB77iUDyXPWxeuQ3T4_r0j-QG6QHg" />

        
    
    <link rel="stylesheet" href="../../../_static/css/main.css">
    
    <link rel="stylesheet" href="../../../_static/basic.css">
    <link rel="stylesheet" href="../../../_static/pygments.css">

    <link rel="stylesheet" href="../../../_static/css/bootstrap.css">
    <style>
        body { padding-top: 20px; }
    </style>
    <link rel="stylesheet" href="../../../_static/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="../../../_static/css/main.css">
        
    <script>
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../../',
            VERSION:     '2014.1.4',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };
    </script>
    
    <script src="../../../_static/js/vendor/jquery-1.9.1.js"></script>
    
    
    <script src="../../../_static/js/vendor/bootstrap.min.js"></script>
    
    
    
    <script src="../../../_static/underscore.js"></script>
    
    
    <script src="../../../_static/doctools.js"></script>
    
        <link rel="shortcut icon" href="../../../_static/favicon.ico">
        <link rel="top" title="None" href="../../../index.html">
        <link rel="up" title="Full list of builtin execution modules" href="index.html">
        <link rel="next" title="salt.modules.freebsd_sysctl" href="salt.modules.freebsd_sysctl.html">
        <link rel="prev" title="salt.modules.extfs" href="salt.modules.extfs.html"> 
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,800italic,300,800' rel='stylesheet' type='text/css'>
        <script src="../../../_static/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        
    </head>

    <body class="index">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="../../../index.html"><img src="../../../_static/images/SaltStack-Logo.png" /></a>
                    <div class="nav-collapse collapse">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="salt.modules.extfs.html" title="salt.modules.extfs">previous</a>
                
            </li>
            <li>
                <a href="salt.modules.freebsd_sysctl.html" title="salt.modules.freebsd_sysctl">next</a>
                
            </li>
            <li>
                <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="content row-fluid">
            <div class="container">
                <div class="span12">
                    <div class="span9">
                        
  <div class="section" id="module-salt.modules.file">
<span id="salt-modules-file"></span><h1>salt.modules.file<a class="headerlink" href="#module-salt.modules.file" title="Permalink to this headline">¶</a></h1>
<p>Manage information about regular files, directories,
and special files on the minion, set/read user,
group, mode, and data</p>
<dl class="function">
<dt id="salt.modules.file.access">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">access</tt><big>(</big><em>path</em>, <em>mode</em><big>)</big><a class="headerlink" href="#salt.modules.file.access" title="Permalink to this definition">¶</a></dt>
<dd><p>Test whether the Salt process has the specified access to the file. One of
the following modes must be specified:</p>
<blockquote>
<div>f: Test the existence of the path
r: Test the readability of the path
w: Test the writability of the path
x: Test whether the path can be executed</div></blockquote>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.access /path/to/file f
salt <span class="s1">&#39;*&#39;</span> file.access /path/to/file x
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.append">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">append</tt><big>(</big><em>path</em>, <em>*args</em><big>)</big><a class="headerlink" href="#salt.modules.file.append" title="Permalink to this definition">¶</a></dt>
<dd><p class="versionadded">
<span class="versionmodified">New in version 0.9.5.</span></p>
<p>Append text to the end of a file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.append /etc/motd <span class="se">\</span>
        <span class="s2">&quot;With all thine offerings thou shalt offer salt.&quot;</span> <span class="se">\</span>
        <span class="s2">&quot;Salt is what makes things taste bad when it isn&#39;t in them.&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.blockreplace">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">blockreplace</tt><big>(</big><em>path</em>, <em>marker_start='#-- start managed zone --'</em>, <em>marker_end='#-- end managed zone --'</em>, <em>content=''</em>, <em>append_if_not_found=False</em>, <em>prepend_if_not_found=False</em>, <em>backup='.bak'</em>, <em>dry_run=False</em>, <em>show_changes=True</em><big>)</big><a class="headerlink" href="#salt.modules.file.blockreplace" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace content of a text block in a file, delimited by line markers</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>A block of content delimited by comments can help you manage several lines
entries without worrying about old entries removal.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function will store two copies of the file in-memory (the original
version and the edited version) in order to detect changes and only
edit the targeted file if necessary.</p>
</div>
<dl class="docutils">
<dt>path</dt>
<dd>Filesystem path to the file to be edited</dd>
<dt>marker_start</dt>
<dd>The line content identifying a line as the start of the content block.
Note that the whole line containing this marker will be considered, so
whitespaces or extra content before or after the marker is included in
final output</dd>
<dt>marker_end</dt>
<dd>The line content identifying a line as the end of the content block.
Note that the whole line containing this marker will be considered, so
whitespaces or extra content before or after the marker is included in
final output</dd>
<dt>content</dt>
<dd>The content to be used between the two lines identified by marker_start
and marker_stop.</dd>
<dt>append_if_not_found <span class="classifier-delimiter">:</span> <span class="classifier">False</span></dt>
<dd>If markers are not found and set to <tt class="docutils literal"><span class="pre">True</span></tt> then, the markers and
content will be appended to the file.</dd>
<dt>prepend_if_not_found <span class="classifier-delimiter">:</span> <span class="classifier">False</span></dt>
<dd>If markers are not found and set to <tt class="docutils literal"><span class="pre">True</span></tt> then, the markers and
content will be prepended to the file.</dd>
<dt>backup</dt>
<dd>The file extension to use for a backup of the file if any edit is made.
Set to <tt class="docutils literal"><span class="pre">False</span></tt> to skip making a backup.</dd>
<dt>dry_run</dt>
<dd>Don't make any edits to the file.</dd>
<dt>show_changes</dt>
<dd>Output a unified diff of the old file and the new file. If <tt class="docutils literal"><span class="pre">False</span></tt>,
return a boolean if any changes were made.</dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.blockreplace /etc/hosts <span class="s1">&#39;#-- start managed zone foobar : DO NOT EDIT --&#39;</span> <span class="se">\</span>
<span class="s1">&#39;#-- end managed zone foobar --&#39;</span> <span class="s1">$&#39;10.0.1.1 foo.foobar\n10.0.1.2 bar.foobar&#39;</span> True
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.check_file_meta">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">check_file_meta</tt><big>(</big><em>name</em>, <em>sfn</em>, <em>source</em>, <em>source_sum</em>, <em>user</em>, <em>group</em>, <em>mode</em>, <em>saltenv</em>, <em>template=None</em>, <em>contents=None</em><big>)</big><a class="headerlink" href="#salt.modules.file.check_file_meta" title="Permalink to this definition">¶</a></dt>
<dd><p>Check for the changes in the file metadata.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.check_file_meta /etc/httpd/conf.d/httpd.conf salt://http/httpd.conf <span class="s1">&#39;{hash_type: &#39;</span>md5<span class="s1">&#39;, &#39;</span>hsum<span class="s1">&#39;: &lt;md5sum&gt;}&#39;</span> root, root, <span class="s1">&#39;755&#39;</span> base
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.check_hash">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">check_hash</tt><big>(</big><em>path</em>, <em>file_hash</em><big>)</big><a class="headerlink" href="#salt.modules.file.check_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file matches the given hash string</p>
<p>Returns true if the hash matched, otherwise false. Raises ValueError if
the hash was not formatted correctly.</p>
<dl class="docutils">
<dt>path</dt>
<dd>A file path</dd>
<dt>hash</dt>
<dd>A string in the form &lt;hash_type&gt;=&lt;hash_value&gt;. For example:
<tt class="docutils literal"><span class="pre">md5=e138491e9d5b97023cea823fe17bac22</span></tt></dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.check_hash /etc/fstab <span class="nv">md5</span><span class="o">=</span>&lt;md5sum&gt;
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.check_managed">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">check_managed</tt><big>(</big><em>name</em>, <em>source</em>, <em>source_hash</em>, <em>user</em>, <em>group</em>, <em>mode</em>, <em>template</em>, <em>context</em>, <em>defaults</em>, <em>saltenv</em>, <em>contents=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#salt.modules.file.check_managed" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see what changes need to be made for a file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.check_managed /etc/httpd/conf.d/httpd.conf salt://http/httpd.conf <span class="s1">&#39;{hash_type: &#39;</span>md5<span class="s1">&#39;, &#39;</span>hsum<span class="s1">&#39;: &lt;md5sum&gt;}&#39;</span> root, root, <span class="s1">&#39;755&#39;</span> jinja True None None base
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.check_perms">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">check_perms</tt><big>(</big><em>name</em>, <em>ret</em>, <em>user</em>, <em>group</em>, <em>mode</em>, <em>follow_symlinks=False</em><big>)</big><a class="headerlink" href="#salt.modules.file.check_perms" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the permissions on files and chown if needed</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.check_perms /etc/sudoers <span class="s1">&#39;{}&#39;</span> root root 400
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 2014.1.3: </span><tt class="docutils literal"><span class="pre">follow_symlinks</span></tt> option added</p>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.chgrp">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">chgrp</tt><big>(</big><em>path</em>, <em>group</em><big>)</big><a class="headerlink" href="#salt.modules.file.chgrp" title="Permalink to this definition">¶</a></dt>
<dd><p>Change the group of a file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.chgrp /etc/passwd root
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.chown">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">chown</tt><big>(</big><em>path</em>, <em>user</em>, <em>group</em><big>)</big><a class="headerlink" href="#salt.modules.file.chown" title="Permalink to this definition">¶</a></dt>
<dd><p>Chown a file, pass the file the desired user and group</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.chown /etc/passwd root root
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.comment">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">comment</tt><big>(</big><em>path</em>, <em>regex</em>, <em>char='#'</em>, <em>backup='.bak'</em><big>)</big><a class="headerlink" href="#salt.modules.file.comment" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.17.0: </span>Use <a class="reference internal" href="#salt.modules.file.replace" title="salt.modules.file.replace"><tt class="xref py py-func docutils literal"><span class="pre">replace()</span></tt></a> instead.</p>
<p>Comment out specified lines in a file</p>
<dl class="docutils">
<dt>path</dt>
<dd>The full path to the file to be edited</dd>
<dt>regex</dt>
<dd>A regular expression used to find the lines that are to be commented;
this pattern will be wrapped in parenthesis and will move any
preceding/trailing <tt class="docutils literal"><span class="pre">^</span></tt> or <tt class="docutils literal"><span class="pre">$</span></tt> characters outside the parenthesis
(e.g., the pattern <tt class="docutils literal"><span class="pre">^foo$</span></tt> will be rewritten as <tt class="docutils literal"><span class="pre">^(foo)$</span></tt>)</dd>
<dt>char <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">#</span></tt></span></dt>
<dd>The character to be inserted at the beginning of a line in order to
comment it out</dd>
<dt>backup <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">.bak</span></tt></span></dt>
<dd><p class="first">The file will be backed up before edit with this file extension</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This backup will be overwritten each time <tt class="docutils literal"><span class="pre">sed</span></tt> / <tt class="docutils literal"><span class="pre">comment</span></tt> /
<tt class="docutils literal"><span class="pre">uncomment</span></tt> is called. Meaning the backup will only be useful
after the first invocation.</p>
</div>
</dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.comment /etc/modules pcspkr
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.contains">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">contains</tt><big>(</big><em>path</em>, <em>text</em><big>)</big><a class="headerlink" href="#salt.modules.file.contains" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.17.0: </span>Use <a class="reference internal" href="#salt.modules.file.search" title="salt.modules.file.search"><tt class="xref py py-func docutils literal"><span class="pre">search()</span></tt></a> instead.</p>
<p>Return <tt class="docutils literal"><span class="pre">True</span></tt> if the file at <tt class="docutils literal"><span class="pre">path</span></tt> contains <tt class="docutils literal"><span class="pre">text</span></tt></p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.contains /etc/crontab <span class="s1">&#39;mymaintenance.sh&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.contains_glob">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">contains_glob</tt><big>(</big><em>path</em>, <em>glob_expr</em><big>)</big><a class="headerlink" href="#salt.modules.file.contains_glob" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.17.0: </span>Use <a class="reference internal" href="#salt.modules.file.search" title="salt.modules.file.search"><tt class="xref py py-func docutils literal"><span class="pre">search()</span></tt></a> instead.</p>
<p>Return <tt class="docutils literal"><span class="pre">True</span></tt> if the given glob matches a string in the named file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.contains_glob /etc/foobar <span class="s1">&#39;*cheese*&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.contains_regex">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">contains_regex</tt><big>(</big><em>path</em>, <em>regex</em>, <em>lchar=''</em><big>)</big><a class="headerlink" href="#salt.modules.file.contains_regex" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.17.0: </span>Use <a class="reference internal" href="#salt.modules.file.search" title="salt.modules.file.search"><tt class="xref py py-func docutils literal"><span class="pre">search()</span></tt></a> instead.</p>
<p>Return True if the given regular expression matches on any line in the text
of a given file.</p>
<p>If the lchar argument (leading char) is specified, it
will strip <cite>lchar</cite> from the left side of each line before trying to match</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.contains_regex /etc/crontab
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.contains_regex_multiline">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">contains_regex_multiline</tt><big>(</big><em>path</em>, <em>regex</em><big>)</big><a class="headerlink" href="#salt.modules.file.contains_regex_multiline" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.17.0: </span>Use <a class="reference internal" href="#salt.modules.file.search" title="salt.modules.file.search"><tt class="xref py py-func docutils literal"><span class="pre">search()</span></tt></a> instead.</p>
<p>Return True if the given regular expression matches anything in the text
of a given file</p>
<p>Traverses multiple lines at a time, via the salt BufferedReader (reads in
chunks)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.contains_regex_multiline /etc/crontab <span class="s1">&#39;^maint&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.copy">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">copy</tt><big>(</big><em>src</em>, <em>dst</em><big>)</big><a class="headerlink" href="#salt.modules.file.copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a file or directory</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.copy /path/to/src /path/to/dst
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.delete_backup">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">delete_backup</tt><big>(</big><em>path</em>, <em>backup_id</em><big>)</big><a class="headerlink" href="#salt.modules.file.delete_backup" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore a previous version of a file that was backed up using Salt's
<a class="reference internal" href="../../states/backup_mode.html"><em>file state backup</em></a> system.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.17.0.</span></p>
<dl class="docutils">
<dt>path</dt>
<dd>The path on the minion to check for backups</dd>
<dt>backup_id</dt>
<dd>The numeric id for the backup you wish to delete, as found using
<a class="reference internal" href="#salt.modules.file.list_backups" title="salt.modules.file.list_backups"><tt class="xref py py-mod docutils literal"><span class="pre">file.list_backups</span></tt></a></dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.restore_backup /foo/bar/baz.txt 0
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.directory_exists">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">directory_exists</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.directory_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests to see if path is a valid directory.  Returns True/False.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.directory_exists /etc
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.extract_hash">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">extract_hash</tt><big>(</big><em>hash_fn</em>, <em>hash_type='md5'</em>, <em>file_name=''</em><big>)</big><a class="headerlink" href="#salt.modules.file.extract_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>This routine is called from the <a class="reference internal" href="../../states/all/salt.states.file.html#salt.states.file.managed" title="salt.states.file.managed"><tt class="xref py py-mod docutils literal"><span class="pre">file.managed</span></tt></a> state to pull a hash from a remote file.
Regular expressions are used line by line on the <tt class="docutils literal"><span class="pre">source_hash</span></tt> file, to
find a potential candidate of the indicated hash type.  This avoids many
problems of arbitrary file lay out rules. It specifically permits pulling
hash codes from debian <tt class="docutils literal"><span class="pre">*.dsc</span></tt> files.</p>
<p>For example:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">openerp_7.0-latest-1.tar.gz</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">file.managed</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/tmp/openerp_7.0-20121227-075624-1_all.deb</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://nightly.openerp.com/7.0/nightly/deb/openerp_7.0-20121227-075624-1.tar.gz</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">source_hash</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://nightly.openerp.com/7.0/nightly/deb/openerp_7.0-20121227-075624-1.dsc</span>
</pre></div>
</div>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.extract_hash /etc/foo sha512 /path/to/hash/file
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.file_exists">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">file_exists</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.file_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests to see if path is a valid file.  Returns True/False.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.file_exists /etc/passwd
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.find">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">find</tt><big>(</big><em>path</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#salt.modules.file.find" title="Permalink to this definition">¶</a></dt>
<dd><p>Approximate the Unix <tt class="docutils literal"><span class="pre">find(1)</span></tt> command and return a list of paths that
meet the specified criteria.</p>
<p>The options include match criteria:</p>
<div class="highlight-python"><pre>name    = path-glob                 # case sensitive
iname   = path-glob                 # case insensitive
regex   = path-regex                # case sensitive
iregex  = path-regex                # case insensitive
type    = file-types                # match any listed type
user    = users                     # match any listed user
group   = groups                    # match any listed group
size    = [+-]number[size-unit]     # default unit = byte
mtime   = interval                  # modified since date
grep    = regex                     # search file contents</pre>
</div>
<p>and/or actions:</p>
<div class="highlight-python"><pre>delete [= file-types]               # default type = 'f'
exec    = command [arg ...]         # where {} is replaced by pathname
print  [= print-opts]</pre>
</div>
<p>The default action is 'print=path'.</p>
<p>file-glob:</p>
<div class="highlight-python"><pre>*                = match zero or more chars
?                = match any char
[abc]            = match a, b, or c
[!abc] or [^abc] = match anything except a, b, and c
[x-y]            = match chars x through y
[!x-y] or [^x-y] = match anything except chars x through y
{a,b,c}          = match a or b or c</pre>
</div>
<p>path-regex: a Python re (regular expression) pattern to match pathnames</p>
<p>file-types: a string of one or more of the following:</p>
<div class="highlight-python"><pre>a: all file types
b: block device
c: character device
d: directory
p: FIFO (named pipe)
f: plain file
l: symlink
s: socket</pre>
</div>
<p>users: a space and/or comma separated list of user names and/or uids</p>
<p>groups: a space and/or comma separated list of group names and/or gids</p>
<p>size-unit:</p>
<div class="highlight-python"><pre>b: bytes
k: kilobytes
m: megabytes
g: gigabytes
t: terabytes</pre>
</div>
<p>interval:</p>
<div class="highlight-python"><pre>[&lt;num&gt;w] [&lt;num&gt;d] [&lt;num&gt;h] [&lt;num&gt;m] [&lt;num&gt;s]

where:
    w: week
    d: day
    h: hour
    m: minute
    s: second</pre>
</div>
<p>print-opts: a comma and/or space separated list of one or more of the
following:</p>
<div class="highlight-python"><pre>group: group name
md5:   MD5 digest of file contents
mode:  file permissions (as integer)
mtime: last modification time (as time_t)
name:  file basename
path:  file absolute path
size:  file size in bytes
type:  file type
user:  user name</pre>
</div>
<p>CLI Examples:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.find / <span class="nb">type</span><span class="o">=</span>f <span class="nv">name</span><span class="o">=</span><span class="se">\*</span>.bak <span class="nv">size</span><span class="o">=</span>+10m
salt <span class="s1">&#39;*&#39;</span> file.find /var <span class="nv">mtime</span><span class="o">=</span>+30d <span class="nv">size</span><span class="o">=</span>+10m <span class="nv">print</span><span class="o">=</span>path,size,mtime
salt <span class="s1">&#39;*&#39;</span> file.find /var/log <span class="nv">name</span><span class="o">=</span><span class="se">\*</span>.<span class="o">[</span>0-9<span class="o">]</span> <span class="nv">mtime</span><span class="o">=</span>+30d <span class="nv">size</span><span class="o">=</span>+10m delete
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_devmm">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_devmm</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_devmm" title="Permalink to this definition">¶</a></dt>
<dd><p>Get major/minor info from a device</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_devmm /dev/chr
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_diff">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_diff</tt><big>(</big><em>minionfile</em>, <em>masterfile</em>, <em>env=None</em>, <em>saltenv='base'</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Return unified diff of file compared to file on master</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_diff /home/fred/.vimrc salt://users/fred/.vimrc
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_gid">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_gid</tt><big>(</big><em>path</em>, <em>follow_symlinks=True</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_gid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the id of the group that owns a given file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_gid /etc/passwd
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.16.4: </span><tt class="docutils literal"><span class="pre">follow_symlinks</span></tt> option added</p>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_group">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_group</tt><big>(</big><em>path</em>, <em>follow_symlinks=True</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the group that owns a given file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_group /etc/passwd
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.16.4: </span><tt class="docutils literal"><span class="pre">follow_symlinks</span></tt> option added</p>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_hash">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_hash</tt><big>(</big><em>path</em>, <em>form='md5'</em>, <em>chunk_size=4096</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_hash" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the hash sum of a file</p>
<dl class="docutils">
<dt>This is better than <tt class="docutils literal"><span class="pre">get_sum</span></tt> for the following reasons:</dt>
<dd><ul class="first last">
<li><p class="first">It does not read the entire file into memory.</p>
</li>
<li><dl class="first docutils">
<dt>It does not return a string on error. The returned value of</dt>
<dd><p class="first last"><tt class="docutils literal"><span class="pre">get_sum</span></tt> cannot really be trusted since it is vulnerable to
collisions: <tt class="docutils literal"><span class="pre">get_sum(...,</span> <span class="pre">'xyz')</span> <span class="pre">==</span> <span class="pre">'Hash</span> <span class="pre">xyz</span> <span class="pre">not</span> <span class="pre">supported'</span></tt></p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_hash /etc/shadow
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_managed">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_managed</tt><big>(</big><em>name</em>, <em>template</em>, <em>source</em>, <em>source_hash</em>, <em>user</em>, <em>group</em>, <em>mode</em>, <em>saltenv</em>, <em>context</em>, <em>defaults</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_managed" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the managed file data for file.managed</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_managed /etc/httpd/conf.d/httpd.conf jinja salt://http/httpd.conf <span class="s1">&#39;{hash_type: &#39;</span>md5<span class="s1">&#39;, &#39;</span>hsum<span class="s1">&#39;: &lt;md5sum&gt;}&#39;</span> root root <span class="s1">&#39;755&#39;</span> base None None
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_mode">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_mode</tt><big>(</big><em>path</em>, <em>follow_symlinks=True</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the mode of a file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_mode /etc/passwd
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 2014.1.0: </span><tt class="docutils literal"><span class="pre">follow_symlinks</span></tt> option added</p>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_selinux_context">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_selinux_context</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_selinux_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Get an SELinux context from a given path</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_selinux_context /etc/hosts
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_sum">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_sum</tt><big>(</big><em>path</em>, <em>form='md5'</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_sum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the sum for the given file, default is md5, sha1, sha224, sha256,
sha384, sha512 are supported</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_sum /etc/passwd sha512
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_uid">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_uid</tt><big>(</big><em>path</em>, <em>follow_symlinks=True</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_uid" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the id of the user that owns a given file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_uid /etc/passwd
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.16.4: </span><tt class="docutils literal"><span class="pre">follow_symlinks</span></tt> option added</p>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.get_user">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">get_user</tt><big>(</big><em>path</em>, <em>follow_symlinks=True</em><big>)</big><a class="headerlink" href="#salt.modules.file.get_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the user that owns a given file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.get_user /etc/passwd
</pre></div>
</div>
<p class="versionchanged">
<span class="versionmodified">Changed in version 0.16.4: </span><tt class="docutils literal"><span class="pre">follow_symlinks</span></tt> option added</p>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.gid_to_group">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">gid_to_group</tt><big>(</big><em>gid</em><big>)</big><a class="headerlink" href="#salt.modules.file.gid_to_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the group id to the group name on this system</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.gid_to_group 0
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.grep">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">grep</tt><big>(</big><em>path</em>, <em>pattern</em>, <em>*args</em><big>)</big><a class="headerlink" href="#salt.modules.file.grep" title="Permalink to this definition">¶</a></dt>
<dd><p>Grep for a string in the specified file</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This function's return value is slated for refinement in future
versions of Salt</p>
</div>
<dl class="docutils">
<dt>path</dt>
<dd>A file path</dd>
<dt>pattern</dt>
<dd>A string. For example:
<tt class="docutils literal"><span class="pre">test</span></tt>
<tt class="docutils literal"><span class="pre">a[0-5]</span></tt></dd>
<dt>args</dt>
<dd>grep options. For example:
<tt class="docutils literal"><span class="pre">&quot;</span> <span class="pre">-v&quot;</span></tt>
<tt class="docutils literal"><span class="pre">&quot;</span> <span class="pre">-i</span> <span class="pre">-B2&quot;</span></tt></dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.grep /etc/passwd nobody
salt <span class="s1">&#39;*&#39;</span> file.grep /etc/sysconfig/network-scripts/ifcfg-eth0 ipaddr <span class="s2">&quot; -i&quot;</span>
salt <span class="s1">&#39;*&#39;</span> file.grep /etc/sysconfig/network-scripts/ifcfg-eth0 ipaddr <span class="s2">&quot; -i -B2&quot;</span>
salt <span class="s1">&#39;*&#39;</span> file.grep <span class="s2">&quot;/etc/sysconfig/network-scripts/*&quot;</span> ipaddr <span class="s2">&quot; -i -l&quot;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.group_to_gid">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">group_to_gid</tt><big>(</big><em>group</em><big>)</big><a class="headerlink" href="#salt.modules.file.group_to_gid" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the group to the gid on this system</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.group_to_gid root
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.is_blkdev">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">is_blkdev</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#salt.modules.file.is_blkdev" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file exists and is a block device.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.is_blkdev /dev/blk
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.is_chrdev">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">is_chrdev</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#salt.modules.file.is_chrdev" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file exists and is a character device.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.is_chrdev /dev/chr
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.is_fifo">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">is_fifo</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#salt.modules.file.is_fifo" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a file exists and is a FIFO.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.is_fifo /dev/fifo
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.lchown">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">lchown</tt><big>(</big><em>path</em>, <em>user</em>, <em>group</em><big>)</big><a class="headerlink" href="#salt.modules.file.lchown" title="Permalink to this definition">¶</a></dt>
<dd><p>Chown a file, pass the file the desired user and group without following
symlinks.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.chown /etc/passwd root root
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.link">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">link</tt><big>(</big><em>src</em>, <em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.link" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a hard link to a file</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.link /path/to/file /path/to/link
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.list_backups">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">list_backups</tt><big>(</big><em>path</em>, <em>limit=None</em><big>)</big><a class="headerlink" href="#salt.modules.file.list_backups" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists the previous versions of a file backed up using Salt's <a class="reference internal" href="../../states/backup_mode.html"><em>file
state backup</em></a> system.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.17.0.</span></p>
<dl class="docutils">
<dt>path</dt>
<dd>The path on the minion to check for backups</dd>
<dt>limit</dt>
<dd>Limit the number of results to the most recent N backups</dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.list_backups /foo/bar/baz.txt
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.lstat">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">lstat</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.lstat" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the lstat attributes for the given file or dir. Does not support
symbolic links.</p>
<p>CLI Example:</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.lstat /path/to/file
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.makedirs">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">makedirs</tt><big>(</big><em>path</em>, <em>user=None</em>, <em>group=None</em>, <em>mode=None</em><big>)</big><a class="headerlink" href="#salt.modules.file.makedirs" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the directory containing this path is available.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.makedirs /opt/code
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.makedirs_perms">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">makedirs_perms</tt><big>(</big><em>name</em>, <em>user=None</em>, <em>group=None</em>, <em>mode='0755'</em><big>)</big><a class="headerlink" href="#salt.modules.file.makedirs_perms" title="Permalink to this definition">¶</a></dt>
<dd><p>Taken and modified from os.makedirs to set user, group and mode for each
directory created.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.makedirs_perms /opt/code
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.manage_file">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">manage_file</tt><big>(</big><em>name</em>, <em>sfn</em>, <em>ret</em>, <em>source</em>, <em>source_sum</em>, <em>user</em>, <em>group</em>, <em>mode</em>, <em>saltenv</em>, <em>backup</em>, <em>makedirs=False</em>, <em>template=None</em>, <em>show_diff=True</em>, <em>contents=None</em>, <em>dir_mode=None</em><big>)</big><a class="headerlink" href="#salt.modules.file.manage_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks the destination against what was retrieved with get_managed and
makes the appropriate modifications (if necessary).</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.manage_file /etc/httpd/conf.d/httpd.conf <span class="s1">&#39;{}&#39;</span> salt://http/httpd.conf <span class="s1">&#39;{hash_type: &#39;</span>md5<span class="s1">&#39;, &#39;</span>hsum<span class="s1">&#39;: &lt;md5sum&gt;}&#39;</span> root root <span class="s1">&#39;755&#39;</span> base <span class="s1">&#39;&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.mkdir">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">mkdir</tt><big>(</big><em>dir_path</em>, <em>user=None</em>, <em>group=None</em>, <em>mode=None</em><big>)</big><a class="headerlink" href="#salt.modules.file.mkdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that a directory is available.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.mkdir /opt/jetty/context
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.mknod">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">mknod</tt><big>(</big><em>name</em>, <em>ntype</em>, <em>major=0</em>, <em>minor=0</em>, <em>user=None</em>, <em>group=None</em>, <em>mode='0600'</em><big>)</big><a class="headerlink" href="#salt.modules.file.mknod" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Create a block device, character device, or fifo pipe.</dt>
<dd><p class="first">Identical to the gnu mknod.</p>
<p class="last">CLI Examples:</p>
</dd>
</dl>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.mknod /dev/chr c 180 31
salt <span class="s1">&#39;*&#39;</span> file.mknod /dev/blk b 8 999
salt <span class="s1">&#39;*&#39;</span> file.nknod /dev/fifo p
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.mknod_blkdev">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">mknod_blkdev</tt><big>(</big><em>name</em>, <em>major</em>, <em>minor</em>, <em>user=None</em>, <em>group=None</em>, <em>mode='0660'</em><big>)</big><a class="headerlink" href="#salt.modules.file.mknod_blkdev" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a block device.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.mknod_blkdev /dev/blk 8 999
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.mknod_chrdev">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">mknod_chrdev</tt><big>(</big><em>name</em>, <em>major</em>, <em>minor</em>, <em>user=None</em>, <em>group=None</em>, <em>mode='0660'</em><big>)</big><a class="headerlink" href="#salt.modules.file.mknod_chrdev" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a character device.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.mknod_chrdev /dev/chr 180 31
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.mknod_fifo">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">mknod_fifo</tt><big>(</big><em>name</em>, <em>user=None</em>, <em>group=None</em>, <em>mode='0660'</em><big>)</big><a class="headerlink" href="#salt.modules.file.mknod_fifo" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a FIFO pipe.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.mknod_fifo /dev/fifo
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.patch">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">patch</tt><big>(</big><em>originalfile</em>, <em>patchfile</em>, <em>options=''</em>, <em>dry_run=False</em><big>)</big><a class="headerlink" href="#salt.modules.file.patch" title="Permalink to this definition">¶</a></dt>
<dd><p class="versionadded">
<span class="versionmodified">New in version 0.10.4.</span></p>
<p>Apply a patch to a file</p>
<p>Equivalent to:</p>
<div class="highlight-python"><pre>patch &lt;options&gt; &lt;originalfile&gt; &lt;patchfile&gt;</pre>
</div>
<dl class="docutils">
<dt>originalfile</dt>
<dd>The full path to the file or directory to be patched</dd>
<dt>patchfile</dt>
<dd>A patch file to apply to <tt class="docutils literal"><span class="pre">originalfile</span></tt></dd>
<dt>options</dt>
<dd>Options to pass to patch.</dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.patch /opt/file.txt /tmp/file.txt.patch
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.psed">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">psed</tt><big>(</big><em>path</em>, <em>before</em>, <em>after</em>, <em>limit=''</em>, <em>backup='.bak'</em>, <em>flags='gMS'</em>, <em>escape_all=False</em>, <em>multi=False</em><big>)</big><a class="headerlink" href="#salt.modules.file.psed" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.17.0: </span>Use <a class="reference internal" href="#salt.modules.file.replace" title="salt.modules.file.replace"><tt class="xref py py-func docutils literal"><span class="pre">replace()</span></tt></a> instead.</p>
<p>Make a simple edit to a file (pure Python version)</p>
<p>Equivalent to:</p>
<div class="highlight-python"><pre>sed &lt;backup&gt; &lt;options&gt; "/&lt;limit&gt;/ s/&lt;before&gt;/&lt;after&gt;/&lt;flags&gt; &lt;file&gt;"</pre>
</div>
<dl class="docutils">
<dt>path</dt>
<dd>The full path to the file to be edited</dd>
<dt>before</dt>
<dd>A pattern to find in order to replace with <tt class="docutils literal"><span class="pre">after</span></tt></dd>
<dt>after</dt>
<dd>Text that will replace <tt class="docutils literal"><span class="pre">before</span></tt></dd>
<dt>limit <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">''</span></tt></span></dt>
<dd>An initial pattern to search for before searching for <tt class="docutils literal"><span class="pre">before</span></tt></dd>
<dt>backup <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">.bak</span></tt></span></dt>
<dd>The file will be backed up before edit with this file extension;
<strong>WARNING:</strong> each time <tt class="docutils literal"><span class="pre">sed</span></tt>/<tt class="docutils literal"><span class="pre">comment</span></tt>/<tt class="docutils literal"><span class="pre">uncomment</span></tt> is called will
overwrite this backup</dd>
<dt>flags <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">gMS</span></tt></span></dt>
<dd><dl class="first last docutils">
<dt>Flags to modify the search. Valid values are:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">g</span></tt>: Replace all occurrences of the pattern, not just the first.</li>
<li><tt class="docutils literal"><span class="pre">I</span></tt>: Ignore case.</li>
<li><tt class="docutils literal"><span class="pre">L</span></tt>: Make <tt class="docutils literal"><span class="pre">\w</span></tt>, <tt class="docutils literal"><span class="pre">\W</span></tt>, <tt class="docutils literal"><span class="pre">\b</span></tt>, <tt class="docutils literal"><span class="pre">\B</span></tt>, <tt class="docutils literal"><span class="pre">\s</span></tt> and <tt class="docutils literal"><span class="pre">\S</span></tt>
dependent on the locale.</li>
<li><tt class="docutils literal"><span class="pre">M</span></tt>: Treat multiple lines as a single line.</li>
<li><tt class="docutils literal"><span class="pre">S</span></tt>: Make <cite>.</cite> match all characters, including newlines.</li>
<li><tt class="docutils literal"><span class="pre">U</span></tt>: Make <tt class="docutils literal"><span class="pre">\w</span></tt>, <tt class="docutils literal"><span class="pre">\W</span></tt>, <tt class="docutils literal"><span class="pre">\b</span></tt>, <tt class="docutils literal"><span class="pre">\B</span></tt>, <tt class="docutils literal"><span class="pre">\d</span></tt>, <tt class="docutils literal"><span class="pre">\D</span></tt>,
<tt class="docutils literal"><span class="pre">\s</span></tt> and <tt class="docutils literal"><span class="pre">\S</span></tt> dependent on Unicode.</li>
<li><tt class="docutils literal"><span class="pre">X</span></tt>: Verbose (whitespace is ignored).</li>
</ul>
</dd>
</dl>
</dd>
<dt>multi: <tt class="docutils literal"><span class="pre">False</span></tt></dt>
<dd>If True, treat the entire file as a single line</dd>
</dl>
<p>Forward slashes and single quotes will be escaped automatically in the
<tt class="docutils literal"><span class="pre">before</span></tt> and <tt class="docutils literal"><span class="pre">after</span></tt> patterns.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.sed /etc/httpd/httpd.conf <span class="s1">&#39;LogLevel warn&#39;</span> <span class="s1">&#39;LogLevel info&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.readdir">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">readdir</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.readdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list containing the contents of a directory</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.readdir /path/to/dir/
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.readlink">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">readlink</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.readlink" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the path that a symlink points to</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.readlink /path/to/link
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.remove">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">remove</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the named file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.remove /tmp/foo
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.rename">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">rename</tt><big>(</big><em>src</em>, <em>dst</em><big>)</big><a class="headerlink" href="#salt.modules.file.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Rename a file or directory</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.rename /path/to/src /path/to/dst
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.replace">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">replace</tt><big>(</big><em>path</em>, <em>pattern</em>, <em>repl</em>, <em>count=0</em>, <em>flags=0</em>, <em>bufsize=1</em>, <em>backup='.bak'</em>, <em>dry_run=False</em>, <em>search_only=False</em>, <em>show_changes=True</em><big>)</big><a class="headerlink" href="#salt.modules.file.replace" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace occurances of a pattern in a file</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.17.0.</span></p>
<p>This is a pure Python implementation that wraps Python's <a class="reference external" href="http://docs.python.org/3/library/re.html#re.sub" title="(in Python v3.4)"><tt class="xref py py-func docutils literal"><span class="pre">sub()</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> -- Filesystem path to the file to be edited</li>
<li><strong>pattern</strong> -- The PCRE search</li>
<li><strong>repl</strong> -- The replacement text</li>
<li><strong>count</strong> -- Maximum number of pattern occurrences to be replaced</li>
<li><strong>flags</strong> (<em>list or int</em>) -- A list of flags defined in the <a class="reference external" href="http://docs.python.org/3/library/re.html#contents-of-module-re" title="(in Python v3.4)"><em class="xref std std-ref">re module documentation</em></a>. Each list item should be a string that will
correlate to the human-friendly flag name. E.g., <tt class="docutils literal"><span class="pre">['IGNORECASE',</span>
<span class="pre">'MULTILINE']</span></tt>. Note: multiline searches must specify <tt class="docutils literal"><span class="pre">file</span></tt> as the
<tt class="docutils literal"><span class="pre">bufsize</span></tt> argument below.</li>
<li><strong>bufsize</strong> (<em>int or str</em>) -- How much of the file to buffer into memory at once. The
default value <tt class="docutils literal"><span class="pre">1</span></tt> processes one line at a time. The special value
<tt class="docutils literal"><span class="pre">file</span></tt> may be specified which will read the entire file into memory
before processing. Note: multiline searches must specify <tt class="docutils literal"><span class="pre">file</span></tt>
buffering.</li>
<li><strong>backup</strong> -- The file extension to use for a backup of the file before
editing. Set to <tt class="docutils literal"><span class="pre">False</span></tt> to skip making a backup.</li>
<li><strong>dry_run</strong> -- Don't make any edits to the file</li>
<li><strong>search_only</strong> -- Just search for the pattern; ignore the replacement;
stop on the first match</li>
<li><strong>show_changes</strong> -- Output a unified diff of the old file and the new
file. If <tt class="docutils literal"><span class="pre">False</span></tt> return a boolean if any changes were made.
Note: using this option will store two copies of the file in-memory
(the original version and the edited version) in order to generate the
diff.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">bool or str</p>
</td>
</tr>
</tbody>
</table>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.replace /etc/httpd/httpd.conf <span class="s1">&#39;LogLevel warn&#39;</span> <span class="s1">&#39;LogLevel info&#39;</span>
salt <span class="s1">&#39;*&#39;</span> file.replace /some/file <span class="s1">&#39;before&#39;</span> <span class="s1">&#39;after&#39;</span> <span class="nv">flags</span><span class="o">=</span><span class="s1">&#39;[MULTILINE, IGNORECASE]&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.restore_backup">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">restore_backup</tt><big>(</big><em>path</em>, <em>backup_id</em><big>)</big><a class="headerlink" href="#salt.modules.file.restore_backup" title="Permalink to this definition">¶</a></dt>
<dd><p>Restore a previous version of a file that was backed up using Salt's
<a class="reference internal" href="../../states/backup_mode.html"><em>file state backup</em></a> system.</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.17.0.</span></p>
<dl class="docutils">
<dt>path</dt>
<dd>The path on the minion to check for backups</dd>
<dt>backup_id</dt>
<dd>The numeric id for the backup you wish to restore, as found using
<a class="reference internal" href="#salt.modules.file.list_backups" title="salt.modules.file.list_backups"><tt class="xref py py-mod docutils literal"><span class="pre">file.list_backups</span></tt></a></dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.restore_backup /foo/bar/baz.txt 0
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.restorecon">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">restorecon</tt><big>(</big><em>path</em>, <em>recursive=False</em><big>)</big><a class="headerlink" href="#salt.modules.file.restorecon" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the SELinux context on a given path</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.restorecon /home/user/.ssh/authorized_keys
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.rmdir">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">rmdir</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.rmdir" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove the specified directory. Fails if a directory is not empty.</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.rmdir /tmp/foo/
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.search">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">search</tt><big>(</big><em>path</em>, <em>pattern</em>, <em>flags=0</em>, <em>bufsize=1</em><big>)</big><a class="headerlink" href="#salt.modules.file.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Search for occurances of a pattern in a file</p>
<p class="versionadded">
<span class="versionmodified">New in version 0.17.0.</span></p>
<p>Params are identical to <a class="reference internal" href="#salt.modules.file.replace" title="salt.modules.file.replace"><tt class="xref py py-func docutils literal"><span class="pre">replace()</span></tt></a>.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.search /etc/crontab <span class="s1">&#39;mymaintenance.sh&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.sed">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">sed</tt><big>(</big><em>path</em>, <em>before</em>, <em>after</em>, <em>limit=''</em>, <em>backup='.bak'</em>, <em>options='-r -e'</em>, <em>flags='g'</em>, <em>escape_all=False</em>, <em>negate_match=False</em><big>)</big><a class="headerlink" href="#salt.modules.file.sed" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.17.0: </span>Use <a class="reference internal" href="#salt.modules.file.replace" title="salt.modules.file.replace"><tt class="xref py py-func docutils literal"><span class="pre">replace()</span></tt></a> instead.</p>
<p>Make a simple edit to a file</p>
<p>Equivalent to:</p>
<div class="highlight-python"><pre>sed &lt;backup&gt; &lt;options&gt; "/&lt;limit&gt;/ s/&lt;before&gt;/&lt;after&gt;/&lt;flags&gt; &lt;file&gt;"</pre>
</div>
<dl class="docutils">
<dt>path</dt>
<dd>The full path to the file to be edited</dd>
<dt>before</dt>
<dd>A pattern to find in order to replace with <tt class="docutils literal"><span class="pre">after</span></tt></dd>
<dt>after</dt>
<dd>Text that will replace <tt class="docutils literal"><span class="pre">before</span></tt></dd>
<dt>limit <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">''</span></tt></span></dt>
<dd>An initial pattern to search for before searching for <tt class="docutils literal"><span class="pre">before</span></tt></dd>
<dt>backup <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">.bak</span></tt></span></dt>
<dd>The file will be backed up before edit with this file extension;
<strong>WARNING:</strong> each time <tt class="docutils literal"><span class="pre">sed</span></tt>/<tt class="docutils literal"><span class="pre">comment</span></tt>/<tt class="docutils literal"><span class="pre">uncomment</span></tt> is called will
overwrite this backup</dd>
<dt>options <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">-r</span> <span class="pre">-e</span></tt></span></dt>
<dd>Options to pass to sed</dd>
<dt>flags <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">g</span></tt></span></dt>
<dd>Flags to modify the sed search; e.g., <tt class="docutils literal"><span class="pre">i</span></tt> for case-insensitve pattern
matching</dd>
<dt>negate_match <span class="classifier-delimiter">:</span> <span class="classifier">False</span></dt>
<dd><p class="first">Negate the search command (<tt class="docutils literal"><span class="pre">!</span></tt>)</p>
<p class="last versionadded">
<span class="versionmodified">New in version 0.17.0.</span></p>
</dd>
</dl>
<p>Forward slashes and single quotes will be escaped automatically in the
<tt class="docutils literal"><span class="pre">before</span></tt> and <tt class="docutils literal"><span class="pre">after</span></tt> patterns.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.sed /etc/httpd/httpd.conf <span class="s1">&#39;LogLevel warn&#39;</span> <span class="s1">&#39;LogLevel info&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.sed_contains">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">sed_contains</tt><big>(</big><em>path</em>, <em>text</em>, <em>limit=''</em>, <em>flags='g'</em><big>)</big><a class="headerlink" href="#salt.modules.file.sed_contains" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.17.0: </span>Use <a class="reference internal" href="#salt.modules.file.search" title="salt.modules.file.search"><tt class="xref py py-func docutils literal"><span class="pre">search()</span></tt></a> instead.</p>
<p>Return True if the file at <tt class="docutils literal"><span class="pre">path</span></tt> contains <tt class="docutils literal"><span class="pre">text</span></tt>. Utilizes sed to
perform the search (line-wise search).</p>
<p>Note: the <tt class="docutils literal"><span class="pre">p</span></tt> flag will be added to any flags you pass in.</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.contains /etc/crontab <span class="s1">&#39;mymaintenance.sh&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.seek_read">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">seek_read</tt><big>(</big><em>path</em>, <em>size</em>, <em>offset</em><big>)</big><a class="headerlink" href="#salt.modules.file.seek_read" title="Permalink to this definition">¶</a></dt>
<dd><p>Seek to a position on a file and write to it</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.seek_read /path/to/file 4096 0
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.seek_write">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">seek_write</tt><big>(</big><em>path</em>, <em>data</em>, <em>offset</em><big>)</big><a class="headerlink" href="#salt.modules.file.seek_write" title="Permalink to this definition">¶</a></dt>
<dd><p>Seek to a position on a file and write to it</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.seek_write /path/to/file <span class="s1">&#39;some data&#39;</span> 4096
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.set_mode">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">set_mode</tt><big>(</big><em>path</em>, <em>mode</em><big>)</big><a class="headerlink" href="#salt.modules.file.set_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the mode of a file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.set_mode /etc/passwd 0644
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.set_selinux_context">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">set_selinux_context</tt><big>(</big><em>path</em>, <em>user=None</em>, <em>role=None</em>, <em>type=None</em>, <em>range=None</em><big>)</big><a class="headerlink" href="#salt.modules.file.set_selinux_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a specific SELinux label on a given path</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.set_selinux_context path &lt;role&gt; &lt;<span class="nb">type</span>&gt; &lt;range&gt;
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.source_list">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">source_list</tt><big>(</big><em>source</em>, <em>source_hash</em>, <em>saltenv</em><big>)</big><a class="headerlink" href="#salt.modules.file.source_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the source list and return the source to use</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.source_list salt://http/httpd.conf <span class="s1">&#39;{hash_type: &#39;</span>md5<span class="s1">&#39;, &#39;</span>hsum<span class="s1">&#39;: &lt;md5sum&gt;}&#39;</span> base
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.stats">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">stats</tt><big>(</big><em>path</em>, <em>hash_type='md5'</em>, <em>follow_symlinks=True</em><big>)</big><a class="headerlink" href="#salt.modules.file.stats" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dict containing the stats for a given file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.stats /etc/passwd
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.statvfs">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">statvfs</tt><big>(</big><em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.statvfs" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform a statvfs call against the filesystem that the file resides on</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.statvfs /path/to/file
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.symlink">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">symlink</tt><big>(</big><em>src</em>, <em>path</em><big>)</big><a class="headerlink" href="#salt.modules.file.symlink" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a symbolic link to a file</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.symlink /path/to/file /path/to/link
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.touch">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">touch</tt><big>(</big><em>name</em>, <em>atime=None</em>, <em>mtime=None</em><big>)</big><a class="headerlink" href="#salt.modules.file.touch" title="Permalink to this definition">¶</a></dt>
<dd><p class="versionadded">
<span class="versionmodified">New in version 0.9.5.</span></p>
<p>Just like the <tt class="docutils literal"><span class="pre">touch</span></tt> command, create a file if it doesn't exist or
simply update the atime and mtime if it already does.</p>
<dl class="docutils">
<dt>atime:</dt>
<dd>Access time in Unix epoch time</dd>
<dt>mtime:</dt>
<dd>Last modification in Unix epoch time</dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.touch /var/log/emptyfile
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.truncate">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">truncate</tt><big>(</big><em>path</em>, <em>length</em><big>)</big><a class="headerlink" href="#salt.modules.file.truncate" title="Permalink to this definition">¶</a></dt>
<dd><p>Seek to a position on a file and write to it</p>
<p class="versionadded">
<span class="versionmodified">New in version 2014.1.0: </span>(Hydrogen)</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.truncate /path/to/file 512
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.uid_to_user">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">uid_to_user</tt><big>(</big><em>uid</em><big>)</big><a class="headerlink" href="#salt.modules.file.uid_to_user" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a uid to a user name</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.uid_to_user 0
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.uncomment">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">uncomment</tt><big>(</big><em>path</em>, <em>regex</em>, <em>char='#'</em>, <em>backup='.bak'</em><big>)</big><a class="headerlink" href="#salt.modules.file.uncomment" title="Permalink to this definition">¶</a></dt>
<dd><p class="deprecated">
<span class="versionmodified">Deprecated since version 0.17.0: </span>Use <a class="reference internal" href="#salt.modules.file.replace" title="salt.modules.file.replace"><tt class="xref py py-func docutils literal"><span class="pre">replace()</span></tt></a> instead.</p>
<p>Uncomment specified commented lines in a file</p>
<dl class="docutils">
<dt>path</dt>
<dd>The full path to the file to be edited</dd>
<dt>regex</dt>
<dd>A regular expression used to find the lines that are to be uncommented.
This regex should not include the comment character. A leading <tt class="docutils literal"><span class="pre">^</span></tt>
character will be stripped for convenience (for easily switching
between comment() and uncomment()).</dd>
<dt>char <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">#</span></tt></span></dt>
<dd>The character to remove in order to uncomment a line</dd>
<dt>backup <span class="classifier-delimiter">:</span> <span class="classifier"><tt class="docutils literal"><span class="pre">.bak</span></tt></span></dt>
<dd>The file will be backed up before edit with this file extension;
<strong>WARNING:</strong> each time <tt class="docutils literal"><span class="pre">sed</span></tt>/<tt class="docutils literal"><span class="pre">comment</span></tt>/<tt class="docutils literal"><span class="pre">uncomment</span></tt> is called will
overwrite this backup</dd>
</dl>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.uncomment /etc/hosts.deny <span class="s1">&#39;ALL: PARANOID&#39;</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="salt.modules.file.user_to_uid">
<tt class="descclassname">salt.modules.file.</tt><tt class="descname">user_to_uid</tt><big>(</big><em>user</em><big>)</big><a class="headerlink" href="#salt.modules.file.user_to_uid" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert user name to a uid</p>
<p>CLI Example:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt <span class="s1">&#39;*&#39;</span> file.user_to_uid root
</pre></div>
</div>
</dd></dl>

</div>


                    </div>
    <div class="span3">
    <div>

        <p>Current Salt release: <a href="../../../topics/releases/2014.1.4.html">2014.1.4</a></p>

        <p class="muted">Docs for previous releases on
            <a href="http://salt.readthedocs.org">salt.rtfd.org</a>.</p><div id="module-funcs"></div>

<script>
    jQuery.fn.local_toc = function(tgt_sel) {
        var tgt = jQuery(tgt_sel);

        tgt.append('<h4>Table of Contents</h4>');

        jQuery('dt .headerlink').each(function(idx, elem) {

            var i = [
                '<li><a href="', elem.href, '">',
                last(elem.href.split('.')),
                '</a></li>']
            .join('');

            tgt.append(i);
        });

        function last(list) {
            return list[list.length - 1];
        }
    };
</script>

<script>
;(function($) {
    $.fn.local_toc('#module-funcs');
})(jQuery);
</script>
  <h4>Previous topic</h4>
  <p class="topless"><a href="salt.modules.extfs.html"
                        title="previous chapter">salt.modules.extfs</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="salt.modules.freebsd_sysctl.html"
                        title="next chapter">salt.modules.freebsd_sysctl</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        <h3>Upcoming SaltStack Events</h3>
        <script src="http://cdn.lanyrd.net/badges/person-v1.min.js"></script>
        <div class="lanyrd-target-splat"><a href="http://lanyrd.com/profile/saltstackinc/" class="lanyrd-splat lanyrd-number-3 lanyrd-context-future" rel="me">My conferences on Lanyrd</a></div>
    </div>
    </div>
                </div>
            </div>
        </div>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="container">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="salt.modules.extfs.html" title="salt.modules.extfs">previous</a>
                
            </li>
            <li>
                <a href="salt.modules.freebsd_sysctl.html" title="salt.modules.freebsd_sysctl">next</a>
                
            </li>
            <li>
                <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div></div>
            </div>
        
            <footer>
                <div class="container">
                        <div class="row-fluid">
                                <div class="footerCol">
                                        <h4>About Us</h4>
                                        <a href="http://saltstack.com/">SaltStack</a>
                                        <a href="http://saltstack.com/about/">Leadership</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Products</h4>
                                        <a href="http://saltstack.com/enterprise/">Enterprise</a>
                                        <a href="http://saltstack.com/services/">Integration</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Services</h4>
                                        <a href="http://saltstack.com/training/">Onsite Training</a>
                                        <a href="http://saltstack.com/services/">Custom Professional Services</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Contact Us</h4>
                                        <a href="http://saltstack.com/contact/">Support</a>
                                        <a href="http://saltstack.com/contact/">Contact us</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Community</h4>
                                        <a href="http://saltstack.org">saltstack.org</a>
                                        <a href="http://docs.saltstack.org/en/latest/">Documentation</a>
<!--                                    <a href="#">Blogs</a> -->
                                </div>
                        </div>
                            <div class="row-fluid social">
<!--                                <a href="http://www.facebook.com/SaltStack"><img src="images/socialFB.png" alt="SaltStack on Facebook" /></a> -->
                                    <a href="http://twitter.com/SaltStackInc"><img src="../../../_static/images/socialTW.png" alt="SaltStack on Twitter" /></a>
                                    <a href="http://www.linkedin.com/company/salt-stack-inc"><img src="../../../_static/images/socialLI.png" alt="SaltStack on LinkedIn" /></a>
<!--                                <a href="http://plus.google.com/114449193225626631691"><img src="images/socialG+.png" alt="SaltStack on Google+" /></a> -->
                                    <a href="https://github.com/saltstack"><img src="../../../_static/images/socialGitHub.png" alt="SaltStack on Github" />
                            </div>
                </div>
            </footer>

        <script src="../../../_static/js/main.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-26984928-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>

        <script>llactid=23943</script>
        <script src="http://t4.trackalyzer.com/trackalyze.js"></script>
    </body>
</html>