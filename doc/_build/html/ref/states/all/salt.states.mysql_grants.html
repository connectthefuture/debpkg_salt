<!DOCTYPE html>








<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>salt.states.mysql_grants</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="google-site-verification" content="1Y-ojT3ndjxA9coB77iUDyXPWxeuQ3T4_r0j-QG6QHg" />

        
    
    <link rel="stylesheet" href="../../../_static/css/main.css">
    
    <link rel="stylesheet" href="../../../_static/basic.css">
    <link rel="stylesheet" href="../../../_static/pygments.css">

    <link rel="stylesheet" href="../../../_static/css/bootstrap.css">
    <style>
        body { padding-top: 20px; }
    </style>
    <link rel="stylesheet" href="../../../_static/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="../../../_static/css/main.css">
        
    <script>
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../../',
            VERSION:     '2014.1.7',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };
    </script>
    
    <script src="../../../_static/js/vendor/jquery-1.9.1.js"></script>
    
    
    <script src="../../../_static/js/vendor/bootstrap.min.js"></script>
    
    
    
    <script src="../../../_static/underscore.js"></script>
    
    
    <script src="../../../_static/doctools.js"></script>
    
        <link rel="shortcut icon" href="../../../_static/favicon.ico">
        <link rel="top" title="None" href="../../../index.html">
        <link rel="up" title="Full list of builtin state modules" href="index.html">
        <link rel="next" title="salt.states.mysql_user" href="salt.states.mysql_user.html">
        <link rel="prev" title="salt.states.mysql_database" href="salt.states.mysql_database.html"> 
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,800italic,300,800' rel='stylesheet' type='text/css'>
        <script src="../../../_static/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        
    </head>

    <body class="index">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="../../../index.html"><img src="../../../_static/images/SaltStack-Logo.png" /></a>
                    <div class="nav-collapse collapse">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="salt.states.mysql_database.html" title="salt.states.mysql_database">previous</a>
                
            </li>
            <li>
                <a href="salt.states.mysql_user.html" title="salt.states.mysql_user">next</a>
                
            </li>
            <li>
                <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="content row-fluid">
            <div class="container">
                <div class="span12">
                    <div class="span9">
                        
  <div class="section" id="module-salt.states.mysql_grants">
<span id="salt-states-mysql-grants"></span><h1>salt.states.mysql_grants<a class="headerlink" href="#module-salt.states.mysql_grants" title="Permalink to this headline">¶</a></h1>
<div class="section" id="management-of-mysql-grants-user-permissions">
<h2>Management of MySQL grants (user permissions)<a class="headerlink" href="#management-of-mysql-grants-user-permissions" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">depends:</th><td class="field-body"><ul class="first simple">
<li>MySQLdb Python module</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">configuration:</th><td class="field-body"><p class="first last">See <a class="reference internal" href="../../modules/all/salt.modules.mysql.html#module-salt.modules.mysql" title="salt.modules.mysql"><tt class="xref py py-mod docutils literal"><span class="pre">salt.modules.mysql</span></tt></a> for setup instructions.</p>
</td>
</tr>
</tbody>
</table>
<p>The mysql_grants module is used to grant and revoke MySQL permissions.</p>
<p>The <tt class="docutils literal"><span class="pre">name</span></tt> you pass in purely symbolic and does not have anything to do
with the grant itself.</p>
<p>The <tt class="docutils literal"><span class="pre">database</span></tt> parameter needs to specify a 'priv_level' in the same
specification as defined in the MySQL documentation:</p>
<ul class="simple">
<li>*</li>
<li>*.*</li>
<li>db_name.*</li>
<li>db_name.tbl_name</li>
<li>etc...</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">frank_exampledb</span><span class="p-Indicator">:</span>
   <span class="l-Scalar-Plain">mysql_grants.present</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">grant</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">select,insert,update</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">database</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">exampledb.*</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">frank</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">localhost</span>

<span class="l-Scalar-Plain">frank_otherdb</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">mysql_grants.present</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">grant</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">all privileges</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">database</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">otherdb.*</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">frank</span>

<span class="l-Scalar-Plain">restricted_singletable</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">mysql_grants.present</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">grant</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">select</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">database</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">somedb.sometable</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">joe</span>
</pre></div>
</div>
<dl class="function">
<dt id="salt.states.mysql_grants.absent">
<tt class="descclassname">salt.states.mysql_grants.</tt><tt class="descname">absent</tt><big>(</big><em>name</em>, <em>grant=None</em>, <em>database=None</em>, <em>user=None</em>, <em>host='localhost'</em>, <em>grant_option=False</em>, <em>escape=True</em>, <em>**connection_args</em><big>)</big><a class="headerlink" href="#salt.states.mysql_grants.absent" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the grant is absent</p>
<dl class="docutils">
<dt>name</dt>
<dd>The name (key) of the grant to add</dd>
<dt>grant</dt>
<dd>The grant priv_type (i.e. select,insert,update OR all privileges)</dd>
<dt>database</dt>
<dd>The database priv_level (i.e. db.tbl OR db.*)</dd>
<dt>user</dt>
<dd>The user to apply the grant to</dd>
<dt>host</dt>
<dd>The network/host that the grant should apply to</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="salt.states.mysql_grants.present">
<tt class="descclassname">salt.states.mysql_grants.</tt><tt class="descname">present</tt><big>(</big><em>name</em>, <em>grant=None</em>, <em>database=None</em>, <em>user=None</em>, <em>host='localhost'</em>, <em>grant_option=False</em>, <em>escape=True</em>, <em>revoke_first=False</em>, <em>**connection_args</em><big>)</big><a class="headerlink" href="#salt.states.mysql_grants.present" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the grant is present with the specified properties</p>
<dl class="docutils">
<dt>name</dt>
<dd>The name (key) of the grant to add</dd>
<dt>grant</dt>
<dd>The grant priv_type (i.e. select,insert,update OR all privileges)</dd>
<dt>database</dt>
<dd>The database priv_level (ie. db.tbl OR db.*)</dd>
<dt>user</dt>
<dd>The user to apply the grant to</dd>
<dt>host</dt>
<dd>The network/host that the grant should apply to</dd>
<dt>grant_option</dt>
<dd>Adds the WITH GRANT OPTION to the defined grant. default: False</dd>
<dt>escape</dt>
<dd>Defines if the database value gets escaped or not. default: True</dd>
<dt>revoke_first</dt>
<dd><p class="first">By default, MySQL will not do anything if you issue a command to grant
privileges that are more restrictive than what's already in place. This
effectively means that you cannot downgrade permissions without first
revoking permissions applied to a db.table/user pair first.</p>
<p>To have Salt forcibly revoke perms before applying a new grant, enable
the 'revoke_first options.</p>
<p>WARNING: This will <em>remove</em> permissions for a database before attempting
to apply new permissions. There is no guarantee that new permissions
will be applied correctly which can leave your database security in an
unknown and potentially dangerous state.
Use with caution!</p>
<p class="last">default: False</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


                    </div>
    <div class="span3">
    <div>

        <p>Current Salt release: <a href="../../../topics/releases/2014.1.7.html">2014.1.7</a></p>

        <p class="muted">Docs for previous releases on
            <a href="http://salt.readthedocs.org">salt.rtfd.org</a>.</p><div id="module-funcs"></div>

<script>
    jQuery.fn.local_toc = function(tgt_sel) {
        var tgt = jQuery(tgt_sel);

        tgt.append('<h4>Table of Contents</h4>');

        jQuery('dt .headerlink').each(function(idx, elem) {

            var i = [
                '<li><a href="', elem.href, '">',
                last(elem.href.split('.')),
                '</a></li>']
            .join('');

            tgt.append(i);
        });

        function last(list) {
            return list[list.length - 1];
        }
    };
</script>

<script>
;(function($) {
    $.fn.local_toc('#module-funcs');
})(jQuery);
</script>
  <h3><a href="../../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">salt.states.mysql_grants</a><ul>
<li><a class="reference internal" href="#management-of-mysql-grants-user-permissions">Management of MySQL grants (user permissions)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="salt.states.mysql_database.html"
                        title="previous chapter">salt.states.mysql_database</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="salt.states.mysql_user.html"
                        title="next chapter">salt.states.mysql_user</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        <h3>Upcoming SaltStack Events</h3>
        <script src="http://cdn.lanyrd.net/badges/person-v1.min.js"></script>
        <div class="lanyrd-target-splat"><a href="http://lanyrd.com/profile/saltstackinc/" class="lanyrd-splat lanyrd-number-3 lanyrd-context-future" rel="me">My conferences on Lanyrd</a></div>
    </div>
    </div>
                </div>
            </div>
        </div>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="container">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="salt.states.mysql_database.html" title="salt.states.mysql_database">previous</a>
                
            </li>
            <li>
                <a href="salt.states.mysql_user.html" title="salt.states.mysql_user">next</a>
                
            </li>
            <li>
                <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div></div>
            </div>
        
            <footer>
                <div class="container">
                        <div class="row-fluid">
                                <div class="footerCol">
                                        <h4>About Us</h4>
                                        <a href="http://saltstack.com/">SaltStack</a>
                                        <a href="http://saltstack.com/about/">Leadership</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Products</h4>
                                        <a href="http://saltstack.com/enterprise/">Enterprise</a>
                                        <a href="http://saltstack.com/services/">Integration</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Services</h4>
                                        <a href="http://saltstack.com/training/">Onsite Training</a>
                                        <a href="http://saltstack.com/services/">Custom Professional Services</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Contact Us</h4>
                                        <a href="http://saltstack.com/contact/">Support</a>
                                        <a href="http://saltstack.com/contact/">Contact us</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Community</h4>
                                        <a href="http://saltstack.org">saltstack.org</a>
                                        <a href="http://docs.saltstack.org/en/latest/">Documentation</a>
<!--                                    <a href="#">Blogs</a> -->
                                </div>
                        </div>
                            <div class="row-fluid social">
<!--                                <a href="http://www.facebook.com/SaltStack"><img src="images/socialFB.png" alt="SaltStack on Facebook" /></a> -->
                                    <a href="http://twitter.com/SaltStackInc"><img src="../../../_static/images/socialTW.png" alt="SaltStack on Twitter" /></a>
                                    <a href="http://www.linkedin.com/company/salt-stack-inc"><img src="../../../_static/images/socialLI.png" alt="SaltStack on LinkedIn" /></a>
<!--                                <a href="http://plus.google.com/114449193225626631691"><img src="images/socialG+.png" alt="SaltStack on Google+" /></a> -->
                                    <a href="https://github.com/saltstack"><img src="../../../_static/images/socialGitHub.png" alt="SaltStack on Github" />
                            </div>
                </div>
            </footer>

        <script src="../../../_static/js/main.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-26984928-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>

        <script>llactid=23943</script>
        <script src="http://t4.trackalyzer.com/trackalyze.js"></script>
    </body>
</html>