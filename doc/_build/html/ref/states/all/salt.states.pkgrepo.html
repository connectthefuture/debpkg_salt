<!DOCTYPE html>








<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>salt.states.pkgrepo</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="google-site-verification" content="1Y-ojT3ndjxA9coB77iUDyXPWxeuQ3T4_r0j-QG6QHg" />

        
    
    <link rel="stylesheet" href="../../../_static/css/main.css">
    
    <link rel="stylesheet" href="../../../_static/basic.css">
    <link rel="stylesheet" href="../../../_static/pygments.css">

    <link rel="stylesheet" href="../../../_static/css/bootstrap.css">
    <style>
        body { padding-top: 20px; }
    </style>
    <link rel="stylesheet" href="../../../_static/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="../../../_static/css/main.css">
        
    <script>
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../../',
            VERSION:     '2014.1.7',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };
    </script>
    
    <script src="../../../_static/js/vendor/jquery-1.9.1.js"></script>
    
    
    <script src="../../../_static/js/vendor/bootstrap.min.js"></script>
    
    
    
    <script src="../../../_static/underscore.js"></script>
    
    
    <script src="../../../_static/doctools.js"></script>
    
        <link rel="shortcut icon" href="../../../_static/favicon.ico">
        <link rel="top" title="None" href="../../../index.html">
        <link rel="up" title="Full list of builtin state modules" href="index.html">
        <link rel="next" title="salt.states.portage_config" href="salt.states.portage_config.html">
        <link rel="prev" title="salt.states.pkgng" href="salt.states.pkgng.html"> 
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,800italic,300,800' rel='stylesheet' type='text/css'>
        <script src="../../../_static/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        
    </head>

    <body class="index">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="../../../index.html"><img src="../../../_static/images/SaltStack-Logo.png" /></a>
                    <div class="nav-collapse collapse">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="salt.states.pkgng.html" title="salt.states.pkgng">previous</a>
                
            </li>
            <li>
                <a href="salt.states.portage_config.html" title="salt.states.portage_config">next</a>
                
            </li>
            <li>
                <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="content row-fluid">
            <div class="container">
                <div class="span12">
                    <div class="span9">
                        
  <div class="section" id="module-salt.states.pkgrepo">
<span id="salt-states-pkgrepo"></span><h1>salt.states.pkgrepo<a class="headerlink" href="#module-salt.states.pkgrepo" title="Permalink to this headline">¶</a></h1>
<div class="section" id="management-of-package-repos">
<h2>Management of package repos<a class="headerlink" href="#management-of-package-repos" title="Permalink to this headline">¶</a></h2>
<p>Package repositories can be managed with the pkgrepo state:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">base</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">pkgrepo.managed</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">humanname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CentOS-$releasever - Base</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">mirrorlist</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">comments</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&#39;#http://mirror.centos.org/centos/$releasever/os/$basearch/&#39;</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">gpgcheck</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">gpgkey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span>
</pre></div>
</div>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">base</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">pkgrepo.managed</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">humanname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Logstash PPA</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">deb http://ppa.launchpad.net/wolfnet/logstash/ubuntu precise main</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">dist</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">precise</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">file</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/etc/apt/sources.list.d/logstash.list</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">keyid</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">28B04E4A</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">keyserver</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">keyserver.ubuntu.com</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">require_in</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">pkg</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">logstash</span>

  <span class="l-Scalar-Plain">pkg.latest</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">logstash</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">refresh</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
</pre></div>
</div>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">base</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">pkgrepo.managed</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ppa</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">wolfnet/logstash</span>
  <span class="l-Scalar-Plain">pkg.latest</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">logstash</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">refresh</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>On Ubuntu systems, the <tt class="docutils literal"><span class="pre">python-software-properties</span></tt> package should be
installed for better support of PPA repositories. To check if this package
is installed, run <tt class="docutils literal"><span class="pre">dpkg</span> <span class="pre">-l</span> <span class="pre">python-software-properties</span></tt>.</p>
<p class="last">Also, some Ubuntu releases have a <a class="reference external" href="https://bugs.launchpad.net/ubuntu/+source/software-properties/+bug/1249080">bug</a> in their
<tt class="docutils literal"><span class="pre">python-software-properties</span></tt> package, a missing dependency on pycurl, so
<tt class="docutils literal"><span class="pre">python-pycurl</span></tt> will need to be manually installed if it is not present
once <tt class="docutils literal"><span class="pre">python-software-properties</span></tt> is installed.</p>
</div>
<dl class="function">
<dt id="salt.states.pkgrepo.absent">
<tt class="descclassname">salt.states.pkgrepo.</tt><tt class="descname">absent</tt><big>(</big><em>name</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#salt.states.pkgrepo.absent" title="Permalink to this definition">¶</a></dt>
<dd><p>This function deletes the specified repo on the system, if it exists. It
is essentially a wrapper around pkg.del_repo.</p>
<dl class="docutils">
<dt>name</dt>
<dd>The name of the package repo, as it would be referred to when running
the regular package manager commands.</dd>
<dt>ppa</dt>
<dd><p class="first">On Ubuntu, you can take advantage of Personal Package Archives on
Launchpad simply by specifying the user and archive name.</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">logstash-ppa</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">pkgrepo.absent</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ppa</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">wolfnet/logstash</span>
</pre></div>
</div>
</dd>
<dt>ppa_auth</dt>
<dd><p class="first">For Ubuntu PPAs there can be private PPAs that require authentication
to access. For these PPAs the username/password can be specified.  This
is required for matching if the name format uses the &quot;ppa:&quot; specifier
and is private (requires username/password to access, which is encoded
in the URI).</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">logstash-ppa</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">pkgrepo.absent</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ppa</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">wolfnet/logstash</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ppa_auth</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">username:password</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="salt.states.pkgrepo.managed">
<tt class="descclassname">salt.states.pkgrepo.</tt><tt class="descname">managed</tt><big>(</big><em>name</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#salt.states.pkgrepo.managed" title="Permalink to this definition">¶</a></dt>
<dd><p>This function manages the configuration on a system that points to the
repositories for the system's package manager.</p>
<dl class="docutils">
<dt>name</dt>
<dd>The name of the package repo, as it would be referred to when running
the regular package manager commands.</dd>
</dl>
<p>For yum-based systems, take note of the following configuration values:</p>
<dl class="docutils">
<dt>humanname</dt>
<dd>On yum-based systems, this is stored as the &quot;name&quot; value in the .repo
file in /etc/yum.repos.d/. On yum-based systems, this is required.</dd>
<dt>baseurl</dt>
<dd>On yum-based systems, baseurl refers to a direct URL to be used for
this yum repo.
One of baseurl or mirrorlist is required.</dd>
<dt>mirrorlist</dt>
<dd>a URL which contains a collection of baseurls to choose from. On
yum-based systems.
One of baseurl or mirrorlist is required.</dd>
<dt>comments</dt>
<dd>Sometimes you want to supply additional information, but not as
enabled configuration. Anything supplied for this list will be saved
in the repo configuration with a comment marker (#) in front.</dd>
</dl>
<p>Additional configuration values, such as gpgkey or gpgcheck, are used
verbatim to update the options for the yum repo in question.</p>
<p>For apt-based systems, take note of the following configuration values:</p>
<dl class="docutils">
<dt>ppa</dt>
<dd><p class="first">On Ubuntu, you can take advantage of Personal Package Archives on
Launchpad simply by specifying the user and archive name. The keyid
will be queried from launchpad and everything else is set
automatically. You can override any of the below settings by simply
setting them as you would normally. For example:</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">logstash-ppa</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">pkgrepo.managed</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ppa</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">wolfnet/logstash</span>
</pre></div>
</div>
</dd>
<dt>ppa_auth</dt>
<dd><p class="first">For Ubuntu PPAs there can be private PPAs that require authentication
to access. For these PPAs the username/password can be passed as an
HTTP Basic style username/password combination.</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">logstash-ppa</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">pkgrepo.managed</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ppa</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">wolfnet/logstash</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">ppa_auth</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">username:password</span>
</pre></div>
</div>
</dd>
<dt>name</dt>
<dd><p class="first">On apt-based systems this must be the complete entry as it would be
seen in the sources.list file.  This can have a limited subset of
components (i.e. 'main') which can be added/modified with the
&quot;comps&quot; option.</p>
<div class="last highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">precise-repo</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">pkgrepo.managed</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">deb http://us.archive.ubuntu.com/ubuntu precise main</span>
</pre></div>
</div>
</dd>
<dt>disabled</dt>
<dd>On apt-based systems, disabled toggles whether or not the repo is
used for resolving dependencies and/or installing packages</dd>
<dt>comps</dt>
<dd>On apt-based systems, comps dictate the types of packages to be
installed from the repository (e.g. main, nonfree, ...).  For
purposes of this, comps should be a comma-separated list.</dd>
<dt>file</dt>
<dd>The filename for the .list that the repository is configured in.
It is important to include the full-path AND make sure it is in
a directory that APT will look in when handling packages</dd>
<dt>dist</dt>
<dd>This dictates the release of the distro the packages should be built
for.  (e.g. unstable)</dd>
<dt>keyid</dt>
<dd>The KeyID of the GPG key to install.  This option also requires
the 'keyserver' option to be set.</dd>
<dt>keyserver</dt>
<dd>This is the name of the keyserver to retrieve gpg keys from.  The
keyid option must also be set for this option to work.</dd>
<dt>key_url</dt>
<dd>A web URL to retrieve the GPG key from.</dd>
<dt>consolidate</dt>
<dd>If set to true, this will consolidate all sources definitions to
the sources.list file, cleanup the now unused files, consolidate
components (e.g. main) for the same URI, type, and architecture
to a single line, and finally remove comments from the sources.list
file.  The consolidate will run every time the state is processed. The
option only needs to be set on one repo managed by salt to take effect.</dd>
<dt>require_in</dt>
<dd>Set this to a list of pkg.installed or pkg.latest to trigger the
running of apt-get update prior to attempting to install these
packages. Setting a require in the pkg will not work for this.</dd>
</dl>
</dd></dl>

</div>
</div>


                    </div>
    <div class="span3">
    <div>

        <p>Current Salt release: <a href="../../../topics/releases/2014.1.7.html">2014.1.7</a></p>

        <p class="muted">Docs for previous releases on
            <a href="http://salt.readthedocs.org">salt.rtfd.org</a>.</p><div id="module-funcs"></div>

<script>
    jQuery.fn.local_toc = function(tgt_sel) {
        var tgt = jQuery(tgt_sel);

        tgt.append('<h4>Table of Contents</h4>');

        jQuery('dt .headerlink').each(function(idx, elem) {

            var i = [
                '<li><a href="', elem.href, '">',
                last(elem.href.split('.')),
                '</a></li>']
            .join('');

            tgt.append(i);
        });

        function last(list) {
            return list[list.length - 1];
        }
    };
</script>

<script>
;(function($) {
    $.fn.local_toc('#module-funcs');
})(jQuery);
</script>
  <h3><a href="../../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">salt.states.pkgrepo</a><ul>
<li><a class="reference internal" href="#management-of-package-repos">Management of package repos</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="salt.states.pkgng.html"
                        title="previous chapter">salt.states.pkgng</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="salt.states.portage_config.html"
                        title="next chapter">salt.states.portage_config</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        <h3>Upcoming SaltStack Events</h3>
        <script src="http://cdn.lanyrd.net/badges/person-v1.min.js"></script>
        <div class="lanyrd-target-splat"><a href="http://lanyrd.com/profile/saltstackinc/" class="lanyrd-splat lanyrd-number-3 lanyrd-context-future" rel="me">My conferences on Lanyrd</a></div>
    </div>
    </div>
                </div>
            </div>
        </div>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="container">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="salt.states.pkgng.html" title="salt.states.pkgng">previous</a>
                
            </li>
            <li>
                <a href="salt.states.portage_config.html" title="salt.states.portage_config">next</a>
                
            </li>
            <li>
                <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div></div>
            </div>
        
            <footer>
                <div class="container">
                        <div class="row-fluid">
                                <div class="footerCol">
                                        <h4>About Us</h4>
                                        <a href="http://saltstack.com/">SaltStack</a>
                                        <a href="http://saltstack.com/about/">Leadership</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Products</h4>
                                        <a href="http://saltstack.com/enterprise/">Enterprise</a>
                                        <a href="http://saltstack.com/services/">Integration</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Services</h4>
                                        <a href="http://saltstack.com/training/">Onsite Training</a>
                                        <a href="http://saltstack.com/services/">Custom Professional Services</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Contact Us</h4>
                                        <a href="http://saltstack.com/contact/">Support</a>
                                        <a href="http://saltstack.com/contact/">Contact us</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Community</h4>
                                        <a href="http://saltstack.org">saltstack.org</a>
                                        <a href="http://docs.saltstack.org/en/latest/">Documentation</a>
<!--                                    <a href="#">Blogs</a> -->
                                </div>
                        </div>
                            <div class="row-fluid social">
<!--                                <a href="http://www.facebook.com/SaltStack"><img src="images/socialFB.png" alt="SaltStack on Facebook" /></a> -->
                                    <a href="http://twitter.com/SaltStackInc"><img src="../../../_static/images/socialTW.png" alt="SaltStack on Twitter" /></a>
                                    <a href="http://www.linkedin.com/company/salt-stack-inc"><img src="../../../_static/images/socialLI.png" alt="SaltStack on LinkedIn" /></a>
<!--                                <a href="http://plus.google.com/114449193225626631691"><img src="images/socialG+.png" alt="SaltStack on Google+" /></a> -->
                                    <a href="https://github.com/saltstack"><img src="../../../_static/images/socialGitHub.png" alt="SaltStack on Github" />
                            </div>
                </div>
            </footer>

        <script src="../../../_static/js/main.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-26984928-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>

        <script>llactid=23943</script>
        <script src="http://t4.trackalyzer.com/trackalyze.js"></script>
    </body>
</html>