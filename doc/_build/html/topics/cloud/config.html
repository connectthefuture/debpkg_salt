
<!DOCTYPE html>








<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Core Configuration</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="google-site-verification" content="1Y-ojT3ndjxA9coB77iUDyXPWxeuQ3T4_r0j-QG6QHg" />

        
    
    <link rel="stylesheet" href="../../_static/css/main.css">
    
    <link rel="stylesheet" href="../../_static/basic.css">
    <link rel="stylesheet" href="../../_static/pygments.css">

    <link rel="stylesheet" href="../../_static/css/bootstrap.css">
    <style>
        body { padding-top: 20px; }
    </style>
    <link rel="stylesheet" href="../../_static/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="../../_static/css/main.css">
        
    <script>
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '2014.1.4',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };
    </script>
    
    <script src="../../_static/js/vendor/jquery-1.9.1.js"></script>
    
    
    <script src="../../_static/js/vendor/bootstrap.min.js"></script>
    
    
    
    <script src="../../_static/underscore.js"></script>
    
    
    <script src="../../_static/doctools.js"></script>
    
        <link rel="shortcut icon" href="../../_static/favicon.ico">
        <link rel="top" title="None" href="../../index.html">
        <link rel="up" title="Salt Cloud Documentation" href="index.html">
        <link rel="next" title="OS Support for Cloud VMs" href="deploy.html">
        <link rel="prev" title="Writing Cloud Provider Modules" href="cloud.html"> 
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,800italic,300,800' rel='stylesheet' type='text/css'>
        <script src="../../_static/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        
    </head>

    <body class="index">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="../../index.html"><img src="../../_static/images/SaltStack-Logo.png" /></a>
                    <div class="nav-collapse collapse">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="cloud.html" title="Writing Cloud Provider Modules">previous</a>
                
            </li>
            <li>
                <a href="deploy.html" title="OS Support for Cloud VMs">next</a>
                
            </li>
            <li>
                <a href="../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="content row-fluid">
            <div class="container">
                <div class="span12">
                    <div class="span9">
                        
  <div class="section" id="core-configuration">
<h1>Core Configuration<a class="headerlink" href="#core-configuration" title="Permalink to this headline">¶</a></h1>
<p>A number of core configuration options and some options that are global to the
VM profiles can be set in the cloud configuration file. By default this file is
located at <tt class="docutils literal"><span class="pre">/etc/salt/cloud</span></tt>.</p>
<div class="section" id="minion-configuration">
<h2>Minion Configuration<a class="headerlink" href="#minion-configuration" title="Permalink to this headline">¶</a></h2>
<p>The default minion configuration is set up in this file. This is where the
minions that are created derive their configuration.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">minion</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">master</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">saltmaster.example.com</span>
</pre></div>
</div>
<p>This is the location in particular to specify the location of the salt master.</p>
</div>
<div class="section" id="new-cloud-configuration-syntax">
<h2>New Cloud Configuration Syntax<a class="headerlink" href="#new-cloud-configuration-syntax" title="Permalink to this headline">¶</a></h2>
<p>The data specific to interacting with public clouds is set up here.</p>
<p><strong>ATTENTION</strong>: Since version 0.8.7 a new cloud provider configuration syntax
was implemented.  It will allow for multiple configurations of the same cloud
provider where only minor details can change, for example, the region for an
EC2 instance. While the old format is still supported and automatically
migrated every time salt-cloud configuration is parsed, a choice was made to
warn the user or even exit with an error if both formats are mixed.</p>
<div class="section" id="migrating-configurations">
<h3>Migrating Configurations<a class="headerlink" href="#migrating-configurations" title="Permalink to this headline">¶</a></h3>
<p>If you wish to migrate, there are several alternatives. Since the old syntax
was mainly done on the main cloud configuration file, see the next before and
after migration example.</p>
<ul class="simple">
<li>Before migration in <tt class="docutils literal"><span class="pre">/etc/salt/cloud</span></tt>:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">AWS.id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">HJGRYCILJLKJYG</span>
<span class="l-Scalar-Plain">AWS.key</span><span class="p-Indicator">:</span> <span class="s">&#39;kdjgfsgm;woormgl/aserigjksjdhasdfgn&#39;</span>
<span class="l-Scalar-Plain">AWS.keyname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test</span>
<span class="l-Scalar-Plain">AWS.securitygroup</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">quick-start</span>
<span class="l-Scalar-Plain">AWS.private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/test.pem</span>
</pre></div>
</div>
<ul class="simple">
<li>After migration in <tt class="docutils literal"><span class="pre">/etc/salt/cloud</span></tt>:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">providers</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">my-aws-migrated-config</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">HJGRYCILJLKJYG</span>
    <span class="l-Scalar-Plain">key</span><span class="p-Indicator">:</span> <span class="s">&#39;kdjgfsgm;woormgl/aserigjksjdhasdfgn&#39;</span>
    <span class="l-Scalar-Plain">keyname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test</span>
    <span class="l-Scalar-Plain">securitygroup</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">quick-start</span>
    <span class="l-Scalar-Plain">private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/test.pem</span>
    <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">aws</span>
</pre></div>
</div>
<p>Notice that it's not longer required to name a cloud provider's configuration
after it's provider, it can be an alias, though, an additional configuration
key is added, <tt class="docutils literal"><span class="pre">provider</span></tt>. This allows for multiple configuration for the same
cloud provider to coexist.</p>
<p>While moving towards an improved and extensible configuration handling
regarding the cloud providers, <tt class="docutils literal"><span class="pre">--providers-config</span></tt>, which defaults to
<tt class="docutils literal"><span class="pre">/etc/salt/cloud.providers</span></tt>, was added to the cli parser.  It allows for the
cloud providers configuration to be provided in a different file, and/or even
any matching file on a sub-directory, <tt class="docutils literal"><span class="pre">cloud.providers.d/*.conf</span></tt> which is
relative to the providers configuration file(with the above configuration file
as an example, <tt class="docutils literal"><span class="pre">/etc/salt/cloud.providers.d/*.conf</span></tt>).</p>
<p>So, using the example configuration above, after migration in
<tt class="docutils literal"><span class="pre">/etc/salt/cloud.providers</span></tt> or
<tt class="docutils literal"><span class="pre">/etc/salt/cloud.providers.d/aws-migrated.conf</span></tt>:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-aws-migrated-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">HJGRYCILJLKJYG</span>
  <span class="l-Scalar-Plain">key</span><span class="p-Indicator">:</span> <span class="s">&#39;kdjgfsgm;woormgl/aserigjksjdhasdfgn&#39;</span>
  <span class="l-Scalar-Plain">keyname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test</span>
  <span class="l-Scalar-Plain">securitygroup</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">quick-start</span>
  <span class="l-Scalar-Plain">private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/test.pem</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">aws</span>
</pre></div>
</div>
<p>Notice that on this last migrated example, it <strong>no longer</strong> includes the
<tt class="docutils literal"><span class="pre">providers</span></tt> starting key.</p>
<p>While migrating the cloud providers configuration, if the provider alias(from
the above example <tt class="docutils literal"><span class="pre">my-aws-migrated-config</span></tt>) changes from what you had(from
the above example <tt class="docutils literal"><span class="pre">aws</span></tt>), you will also need to change the <tt class="docutils literal"><span class="pre">provider</span></tt>
configuration key in the defined profiles.</p>
<ul class="simple">
<li>From:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">rhel_aws</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">aws</span>
  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ami-e565ba8c</span>
  <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Micro Instance</span>
</pre></div>
</div>
<ul class="simple">
<li>To:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">rhel_aws</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my-aws-migrated-config</span>
  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ami-e565ba8c</span>
  <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Micro Instance</span>
</pre></div>
</div>
<p>This new configuration syntax even allows you to have multiple cloud
configurations under the same alias, for example:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">production-config</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">HJGRYCILJLKJYG</span>
    <span class="l-Scalar-Plain">key</span><span class="p-Indicator">:</span> <span class="s">&#39;kdjgfsgm;woormgl/aserigjksjdhasdfgn&#39;</span>
    <span class="l-Scalar-Plain">keyname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test</span>
    <span class="l-Scalar-Plain">securitygroup</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">quick-start</span>
    <span class="l-Scalar-Plain">private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/test.pem</span>

  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">example_user</span>
    <span class="l-Scalar-Plain">apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">123984bjjas87034</span>
    <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">rackspace</span>
</pre></div>
</div>
<p><strong>Notice the dash and indentation on the above example.</strong></p>
<p>Having multiple entries for a configuration alias also makes the <tt class="docutils literal"><span class="pre">provider</span></tt>
key on any defined profile to change, see the example:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">rhel_aws_dev</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">production-config:aws</span>
  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ami-e565ba8c</span>
  <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Micro Instance</span>

<span class="l-Scalar-Plain">rhel_aws_prod</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">production-config:aws</span>
  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ami-e565ba8c</span>
  <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">High-CPU Extra Large Instance</span>


<span class="l-Scalar-Plain">database_prod</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">production-config:rackspace</span>
  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Ubuntu 12.04 LTS</span>
  <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">256 server</span>
</pre></div>
</div>
<p>Notice that because of the multiple entries, one has to be explicit about the
provider alias and name, from the above example, <tt class="docutils literal"><span class="pre">production-config:aws</span></tt>.</p>
<p>This new syntax also changes the interaction with the <tt class="docutils literal"><span class="pre">salt-cloud</span></tt> binary.
<tt class="docutils literal"><span class="pre">--list-location</span></tt>, <tt class="docutils literal"><span class="pre">--list-images</span></tt> and <tt class="docutils literal"><span class="pre">--list-sizes</span></tt> which needs a cloud
provider as an argument. Since 0.8.7 the argument used should be the configured
cloud provider alias. If the provider alias only as a single entry, use
<tt class="docutils literal"><span class="pre">&lt;provider-alias&gt;</span></tt>.  If it has multiple entries,
<tt class="docutils literal"><span class="pre">&lt;provider-alias&gt;:&lt;provider-name&gt;</span></tt> should be used.</p>
</div>
</div>
<div class="section" id="cloud-configurations">
<h2>Cloud Configurations<a class="headerlink" href="#cloud-configurations" title="Permalink to this headline">¶</a></h2>
<div class="section" id="rackspace">
<h3>Rackspace<a class="headerlink" href="#rackspace" title="Permalink to this headline">¶</a></h3>
<p>Rackspace cloud requires two configuration options:</p>
<ul class="simple">
<li>Using the old format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">RACKSPACE.user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">example_user</span>
<span class="l-Scalar-Plain">RACKSPACE.apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">123984bjjas87034</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the new configuration format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-rackspace-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">example_user</span>
  <span class="l-Scalar-Plain">apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">123984bjjas87034</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">rackspace</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: With the new providers configuration syntax you would have <tt class="docutils literal"><span class="pre">provider:</span>
<span class="pre">rackspace-config</span></tt> instead of <tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">rackspace</span></tt> on a profile
configuration.</p>
</div>
<div class="section" id="amazon-aws">
<h3>Amazon AWS<a class="headerlink" href="#amazon-aws" title="Permalink to this headline">¶</a></h3>
<p>A number of configuration options are required for Amazon AWS:</p>
<ul class="simple">
<li>Using the old format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">AWS.id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">HJGRYCILJLKJYG</span>
<span class="l-Scalar-Plain">AWS.key</span><span class="p-Indicator">:</span> <span class="s">&#39;kdjgfsgm;woormgl/aserigjksjdhasdfgn&#39;</span>
<span class="l-Scalar-Plain">AWS.keyname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test</span>
<span class="l-Scalar-Plain">AWS.securitygroup</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">quick-start</span>
<span class="l-Scalar-Plain">AWS.private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/test.pem</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the new configuration format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-aws-quick-start</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">HJGRYCILJLKJYG</span>
  <span class="l-Scalar-Plain">key</span><span class="p-Indicator">:</span> <span class="s">&#39;kdjgfsgm;woormgl/aserigjksjdhasdfgn&#39;</span>
  <span class="l-Scalar-Plain">keyname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test</span>
  <span class="l-Scalar-Plain">securitygroup</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">quick-start</span>
  <span class="l-Scalar-Plain">private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/test.pem</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">aws</span>

<span class="l-Scalar-Plain">my-aws-default</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">HJGRYCILJLKJYG</span>
  <span class="l-Scalar-Plain">key</span><span class="p-Indicator">:</span> <span class="s">&#39;kdjgfsgm;woormgl/aserigjksjdhasdfgn&#39;</span>
  <span class="l-Scalar-Plain">keyname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test</span>
  <span class="l-Scalar-Plain">securitygroup</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">default</span>
  <span class="l-Scalar-Plain">private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/test.pem</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">aws</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: With the new providers configuration syntax you would have
<tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">my-aws-quick-start</span></tt> or <tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">my-aws-default</span></tt> instead of
<tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">aws</span></tt> on a profile configuration.</p>
</div>
<div class="section" id="linode">
<h3>Linode<a class="headerlink" href="#linode" title="Permalink to this headline">¶</a></h3>
<p>Linode requires a single API key, but the default root password also needs to
be set:</p>
<ul class="simple">
<li>Using the old format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">LINODE.apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">asldkgfakl;sdfjsjaslfjaklsdjf;askldjfaaklsjdfhasldsadfghdkf</span>
<span class="l-Scalar-Plain">LINODE.password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">F00barbaz</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the new configuration format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-linode-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">asldkgfakl;sdfjsjaslfjaklsdjf;askldjfaaklsjdfhasldsadfghdkf</span>
  <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">F00barbaz</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">linode</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: With the new providers configuration syntax you would have
<tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">my-linode-config</span></tt> instead of <tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">linode</span></tt> on a profile
configuration.</p>
<p>The password needs to be 8 characters and contain lowercase, uppercase and
numbers.</p>
</div>
<div class="section" id="joyent-cloud">
<h3>Joyent Cloud<a class="headerlink" href="#joyent-cloud" title="Permalink to this headline">¶</a></h3>
<p>The Joyent cloud requires three configuration parameters. The user name and
password that are used to log into the Joyent system, and the location of the
private ssh key associated with the Joyent account. The ssh key is needed to
send the provisioning commands up to the freshly created virtual machine,</p>
<ul class="simple">
<li>Using the old format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">JOYENT.user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">fred</span>
<span class="l-Scalar-Plain">JOYENT.password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">saltybacon</span>
<span class="l-Scalar-Plain">JOYENT.private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/joyent.pem</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the new configuration format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-joyent-config</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">fred</span>
    <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">saltybacon</span>
    <span class="l-Scalar-Plain">private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/joyent.pem</span>
    <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">joyent</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: With the new providers configuration syntax you would have
<tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">my-joyent-config</span></tt> instead of <tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">joyent</span></tt> on a profile
configuration.</p>
</div>
<div class="section" id="gogrid">
<h3>GoGrid<a class="headerlink" href="#gogrid" title="Permalink to this headline">¶</a></h3>
<p>To use Salt Cloud with GoGrid log into the GoGrid web interface and create an
API key. Do this by clicking on &quot;My Account&quot; and then going to the API Keys
tab.</p>
<p>The GOGRID.apikey and the GOGRID.sharedsecret configuration parameters need to
be set in the configuration file to enable interfacing with GoGrid:</p>
<ul class="simple">
<li>Using the old format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">GOGRID.apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">asdff7896asdh789</span>
<span class="l-Scalar-Plain">GOGRID.sharedsecret</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">saltybacon</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the new configuration format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-gogrid-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">asdff7896asdh789</span>
  <span class="l-Scalar-Plain">sharedsecret</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">saltybacon</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">gogrid</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: With the new providers configuration syntax you would have
<tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">my-gogrid-config</span></tt> instead of <tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">gogrid</span></tt> on a profile
configuration.</p>
</div>
<div class="section" id="openstack">
<h3>OpenStack<a class="headerlink" href="#openstack" title="Permalink to this headline">¶</a></h3>
<p>OpenStack configuration differs between providers, and at the moment several
options need to be specified. This module has been officially tested against
the HP and the Rackspace implementations, and some examples are provided for
both.</p>
<ul class="simple">
<li>Using the old format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># For HP</span>
<span class="l-Scalar-Plain">OPENSTACK.identity_url</span><span class="p-Indicator">:</span> <span class="s">&#39;https://region-a.geo-1.identity.hpcloudsvc.com:35357/v2.0/&#39;</span>
<span class="l-Scalar-Plain">OPENSTACK.compute_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Compute</span>
<span class="l-Scalar-Plain">OPENSTACK.compute_region</span><span class="p-Indicator">:</span> <span class="s">&#39;az-1.region-a.geo-1&#39;</span>
<span class="l-Scalar-Plain">OPENSTACK.tenant</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser-tenant1</span>
<span class="l-Scalar-Plain">OPENSTACK.user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser</span>
<span class="l-Scalar-Plain">OPENSTACK.ssh_key_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mykey</span>
<span class="l-Scalar-Plain">OPENSTACK.ssh_key_file</span><span class="p-Indicator">:</span> <span class="s">&#39;/etc/salt/hpcloud/mykey.pem&#39;</span>
<span class="l-Scalar-Plain">OPENSTACK.password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mypass</span>

<span class="c1"># For Rackspace</span>
<span class="l-Scalar-Plain">OPENSTACK.identity_url</span><span class="p-Indicator">:</span> <span class="s">&#39;https://identity.api.rackspacecloud.com/v2.0/tokens&#39;</span>
<span class="l-Scalar-Plain">OPENSTACK.compute_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cloudServersOpenStack</span>
<span class="l-Scalar-Plain">OPENSTACK.protocol</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ipv4</span>
<span class="l-Scalar-Plain">OPENSTACK.compute_region</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">DFW</span>
<span class="l-Scalar-Plain">OPENSTACK.protocol</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ipv4</span>
<span class="l-Scalar-Plain">OPENSTACK.user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser</span>
<span class="l-Scalar-Plain">OPENSTACK.tenant</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5555555</span>
<span class="l-Scalar-Plain">OPENSTACK.password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mypass</span>
</pre></div>
</div>
<p>If you have an API key for your provider, it may be specified instead of a
password:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">OPENSTACK.apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">901d3f579h23c8v73q9</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the new configuration format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># For HP</span>
<span class="l-Scalar-Plain">my-openstack-hp-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">identity_url</span><span class="p-Indicator">:</span>
  <span class="s">&#39;https://region-a.geo-1.identity.hpcloudsvc.com:35357/v2.0/&#39;</span>
  <span class="l-Scalar-Plain">compute_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Compute</span>
  <span class="l-Scalar-Plain">compute_region</span><span class="p-Indicator">:</span> <span class="s">&#39;az-1.region-a.geo-1&#39;</span>
  <span class="l-Scalar-Plain">tenant</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser-tenant1</span>
  <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser</span>
  <span class="l-Scalar-Plain">ssh_key_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mykey</span>
  <span class="l-Scalar-Plain">ssh_key_file</span><span class="p-Indicator">:</span> <span class="s">&#39;/etc/salt/hpcloud/mykey.pem&#39;</span>
  <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mypass</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">openstack</span>

<span class="c1"># For Rackspace</span>
<span class="l-Scalar-Plain">my-openstack-rackspace-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">identity_url</span><span class="p-Indicator">:</span> <span class="s">&#39;https://identity.api.rackspacecloud.com/v2.0/tokens&#39;</span>
  <span class="l-Scalar-Plain">compute_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cloudServersOpenStack</span>
  <span class="l-Scalar-Plain">protocol</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ipv4</span>
  <span class="l-Scalar-Plain">compute_region</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">DFW</span>
  <span class="l-Scalar-Plain">protocol</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ipv4</span>
  <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser</span>
  <span class="l-Scalar-Plain">tenant</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5555555</span>
  <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mypass</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">openstack</span>
</pre></div>
</div>
<p>If you have an API key for your provider, it may be specified instead of a
password:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-openstack-hp-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">901d3f579h23c8v73q9</span>

<span class="l-Scalar-Plain">my-openstack-rackspace-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">apikey</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">901d3f579h23c8v73q9</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: With the new providers configuration syntax you would have
<tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">my-openstack-hp-config</span></tt> or <tt class="docutils literal"><span class="pre">provider:</span>
<span class="pre">my-openstack-rackspace-config</span></tt> instead of <tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">openstack</span></tt> on a profile
configuration.</p>
<p>You will certainly need to configure the <tt class="docutils literal"><span class="pre">user</span></tt>, <tt class="docutils literal"><span class="pre">tenant</span></tt> and either
<tt class="docutils literal"><span class="pre">password</span></tt> or <tt class="docutils literal"><span class="pre">apikey</span></tt>.</p>
<p>If your OpenStack instances only have private IP addresses and a CIDR range of
private addresses are not reachable from the salt-master, you may set your
preference to have Salt ignore it. Using the old could configurations syntax:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">OPENSTACK.ignore_cidr</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">192.168.0.0/16</span>
</pre></div>
</div>
<p>Using the new syntax:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-openstack-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">ignore_cidr</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">192.168.0.0/16</span>
</pre></div>
</div>
<p>For in-house Openstack Essex installation, libcloud needs the service_type :</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-openstack-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">identity_url</span><span class="p-Indicator">:</span> <span class="s">&#39;http://control.openstack.example.org:5000/v2.0/&#39;</span>
  <span class="l-Scalar-Plain">compute_name</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Compute Service</span>
  <span class="l-Scalar-Plain">service_type</span> <span class="p-Indicator">:</span> <span class="l-Scalar-Plain">compute</span>
</pre></div>
</div>
</div>
<div class="section" id="digital-ocean">
<h3>Digital Ocean<a class="headerlink" href="#digital-ocean" title="Permalink to this headline">¶</a></h3>
<p>Using Salt for Digital Ocean requires a client_key and an api_key. These can be
found in the Digital Ocean web interface, in the &quot;My Settings&quot; section, under
the API Access tab.</p>
<ul class="simple">
<li>Using the old format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">DIGITAL_OCEAN.client_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">wFGEwgregeqw3435gDger</span>
<span class="l-Scalar-Plain">DIGITAL_OCEAN.api_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GDE43t43REGTrkilg43934t34qT43t4dgegerGEgg</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the new configuration format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-digitalocean-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">digital_ocean</span>
  <span class="l-Scalar-Plain">client_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">wFGEwgregeqw3435gDger</span>
  <span class="l-Scalar-Plain">api_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">GDE43t43REGTrkilg43934t34qT43t4dgegerGEgg</span>
  <span class="l-Scalar-Plain">location</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">New York 1</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: With the new providers configuration syntax you would have
<tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">my-digitalocean-config</span></tt> instead of <tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">digital_ocean</span></tt> on a
profile configuration.</p>
</div>
<div class="section" id="parallels">
<h3>Parallels<a class="headerlink" href="#parallels" title="Permalink to this headline">¶</a></h3>
<p>Using Salt with Parallels requires a user, password and url. These can be
obtained from your cloud provider.</p>
<ul class="simple">
<li>Using the old format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">PARALLELS.user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser</span>
<span class="l-Scalar-Plain">PARALLELS.password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">xyzzy</span>
<span class="l-Scalar-Plain">PARALLELS.url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://api.cloud.xmission.com:4465/paci/v1.0/</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the new configuration format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-parallels-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser</span>
  <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">xyzzy</span>
  <span class="l-Scalar-Plain">url</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">https://api.cloud.xmission.com:4465/paci/v1.0/</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">parallels</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: With the new providers configuration syntax you would have
<tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">my-parallels-config</span></tt> instead of <tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">parallels</span></tt> on a
profile configuration.</p>
</div>
<div class="section" id="ibm-smartcloud-enterprise">
<h3>IBM SmartCloud Enterprise<a class="headerlink" href="#ibm-smartcloud-enterprise" title="Permalink to this headline">¶</a></h3>
<p>In addition to a username and password, the IBM SCE module requires an SSH key,
which is currently configured inside IBM's web interface. A location is also
required to create instances, but not to query their cloud. This is important,
because you need to use salt-cloud --list-locations (with the other options
already set) in order to find the name of the location that you want to use.</p>
<ul class="simple">
<li>Using the old format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">IBMSCE.user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser@mycorp.com</span>
<span class="l-Scalar-Plain">IBMSCE.password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mypass</span>
<span class="l-Scalar-Plain">IBMSCE.ssh_key_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mykey</span>
<span class="l-Scalar-Plain">IBMSCE.ssh_key_file</span><span class="p-Indicator">:</span> <span class="s">&#39;/etc/salt/ibm/mykey.pem&#39;</span>
<span class="l-Scalar-Plain">IBMSCE.location</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Raleigh</span>
</pre></div>
</div>
<ul class="simple">
<li>Using the new configuration format:</li>
</ul>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-ibmsce-config</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser@mycorp.com</span>
  <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mypass</span>
  <span class="l-Scalar-Plain">ssh_key_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mykey</span>
  <span class="l-Scalar-Plain">ssh_key_file</span><span class="p-Indicator">:</span> <span class="s">&#39;/etc/salt/ibm/mykey.pem&#39;</span>
  <span class="l-Scalar-Plain">location</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Raleigh</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ibmsce</span>
</pre></div>
</div>
<p><strong>NOTE</strong>: With the new providers configuration syntax you would have
<tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">my-imbsce-config</span></tt> instead of <tt class="docutils literal"><span class="pre">provider:</span> <span class="pre">ibmsce</span></tt> on a profile
configuration.</p>
</div>
<div class="section" id="saltify">
<span id="config-saltify"></span><h3>Saltify<a class="headerlink" href="#saltify" title="Permalink to this headline">¶</a></h3>
<p>The Saltify driver is a new, experimental driver for installing Salt on
existing machines (virtual or bare metal). Because it does not use an actual
cloud provider, it needs no configuration in the main cloud config file.
However, it does still require a profile to be set up, and is most useful when
used inside a map file. The key parameters to be set are <tt class="docutils literal"><span class="pre">ssh_host</span></tt>,
<tt class="docutils literal"><span class="pre">ssh_username</span></tt> and either <tt class="docutils literal"><span class="pre">ssh_keyfile</span></tt> or <tt class="docutils literal"><span class="pre">ssh_password</span></tt>. These may all
be set in either the profile or the map. An example configuration might use the
following in cloud.profiles:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">make_salty</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">saltify</span>
</pre></div>
</div>
<p>And in the map file:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">make_salty</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">myinstance</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">ssh_host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">54.262.11.38</span>
    <span class="l-Scalar-Plain">ssh_username</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ubuntu</span>
    <span class="l-Scalar-Plain">ssh_keyfile</span><span class="p-Indicator">:</span> <span class="s">&#39;/etc/salt/mysshkey.pem&#39;</span>
    <span class="l-Scalar-Plain">sudo</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="extending-profiles-and-cloud-providers-configuration">
<h2>Extending Profiles and Cloud Providers Configuration<a class="headerlink" href="#extending-profiles-and-cloud-providers-configuration" title="Permalink to this headline">¶</a></h2>
<p>As of 0.8.7, the option to extend both the profiles and cloud providers
configuration and avoid duplication was added. The extends feature works on the
current profiles configuration, but, regarding the cloud providers
configuration, <strong>only</strong> works in the new syntax and respective configuration
files, ie, <tt class="docutils literal"><span class="pre">/etc/salt/salt/cloud.providers</span></tt> or
<tt class="docutils literal"><span class="pre">/etc/salt/cloud.providers.d/*.conf</span></tt>.</p>
<div class="section" id="extending-profiles">
<h3>Extending Profiles<a class="headerlink" href="#extending-profiles" title="Permalink to this headline">¶</a></h3>
<p>Some example usage on how to use <tt class="docutils literal"><span class="pre">extends</span></tt> with profiles. Consider
<tt class="docutils literal"><span class="pre">/etc/salt/salt/cloud.profiles</span></tt> containing:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">development-instances</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my-ec2-config</span>
  <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Micro Instance</span>
  <span class="l-Scalar-Plain">ssh_username</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ec2_user</span>
  <span class="l-Scalar-Plain">securitygroup</span><span class="p-Indicator">:</span>
    <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">default</span>
  <span class="l-Scalar-Plain">deploy</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">False</span>

<span class="l-Scalar-Plain">Amazon-Linux-AMI-2012.09-64bit</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ami-54cf5c3d</span>
  <span class="l-Scalar-Plain">extends</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">development-instances</span>

<span class="l-Scalar-Plain">Fedora-17</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ami-08d97e61</span>
  <span class="l-Scalar-Plain">extends</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">development-instances</span>

<span class="l-Scalar-Plain">CentOS-5</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my-aws-config</span>
  <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ami-09b61d60</span>
  <span class="l-Scalar-Plain">extends</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">development-instances</span>
</pre></div>
</div>
<p>The above configuration, once parsed would generate the following profiles
data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[{</span><span class="s">&#39;deploy&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;image&#39;</span><span class="p">:</span> <span class="s">&#39;ami-08d97e61&#39;</span><span class="p">,</span>
  <span class="s">&#39;profile&#39;</span><span class="p">:</span> <span class="s">&#39;Fedora-17&#39;</span><span class="p">,</span>
  <span class="s">&#39;provider&#39;</span><span class="p">:</span> <span class="s">&#39;my-ec2-config&#39;</span><span class="p">,</span>
  <span class="s">&#39;securitygroup&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;default&#39;</span><span class="p">],</span>
  <span class="s">&#39;size&#39;</span><span class="p">:</span> <span class="s">&#39;Micro Instance&#39;</span><span class="p">,</span>
  <span class="s">&#39;ssh_username&#39;</span><span class="p">:</span> <span class="s">&#39;ec2_user&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s">&#39;deploy&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;image&#39;</span><span class="p">:</span> <span class="s">&#39;ami-09b61d60&#39;</span><span class="p">,</span>
  <span class="s">&#39;profile&#39;</span><span class="p">:</span> <span class="s">&#39;CentOS-5&#39;</span><span class="p">,</span>
  <span class="s">&#39;provider&#39;</span><span class="p">:</span> <span class="s">&#39;my-aws-config&#39;</span><span class="p">,</span>
  <span class="s">&#39;securitygroup&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;default&#39;</span><span class="p">],</span>
  <span class="s">&#39;size&#39;</span><span class="p">:</span> <span class="s">&#39;Micro Instance&#39;</span><span class="p">,</span>
  <span class="s">&#39;ssh_username&#39;</span><span class="p">:</span> <span class="s">&#39;ec2_user&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s">&#39;deploy&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;image&#39;</span><span class="p">:</span> <span class="s">&#39;ami-54cf5c3d&#39;</span><span class="p">,</span>
  <span class="s">&#39;profile&#39;</span><span class="p">:</span> <span class="s">&#39;Amazon-Linux-AMI-2012.09-64bit&#39;</span><span class="p">,</span>
  <span class="s">&#39;provider&#39;</span><span class="p">:</span> <span class="s">&#39;my-ec2-config&#39;</span><span class="p">,</span>
  <span class="s">&#39;securitygroup&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;default&#39;</span><span class="p">],</span>
  <span class="s">&#39;size&#39;</span><span class="p">:</span> <span class="s">&#39;Micro Instance&#39;</span><span class="p">,</span>
  <span class="s">&#39;ssh_username&#39;</span><span class="p">:</span> <span class="s">&#39;ec2_user&#39;</span><span class="p">},</span>
 <span class="p">{</span><span class="s">&#39;deploy&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
  <span class="s">&#39;profile&#39;</span><span class="p">:</span> <span class="s">&#39;development-instances&#39;</span><span class="p">,</span>
  <span class="s">&#39;provider&#39;</span><span class="p">:</span> <span class="s">&#39;my-ec2-config&#39;</span><span class="p">,</span>
  <span class="s">&#39;securitygroup&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;default&#39;</span><span class="p">],</span>
  <span class="s">&#39;size&#39;</span><span class="p">:</span> <span class="s">&#39;Micro Instance&#39;</span><span class="p">,</span>
  <span class="s">&#39;ssh_username&#39;</span><span class="p">:</span> <span class="s">&#39;ec2_user&#39;</span><span class="p">}]</span>
</pre></div>
</div>
<p>Pretty cool right?</p>
</div>
<div class="section" id="extending-providers">
<h3>Extending Providers<a class="headerlink" href="#extending-providers" title="Permalink to this headline">¶</a></h3>
<p>Some example usage on how to use <tt class="docutils literal"><span class="pre">extends</span></tt> within the cloud providers
configuration.  Consider <tt class="docutils literal"><span class="pre">/etc/salt/salt/cloud.providers</span></tt> containing:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">my-develop-envs</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">id</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">HJGRYCILJLKJYG</span>
    <span class="l-Scalar-Plain">key</span><span class="p-Indicator">:</span> <span class="s">&#39;kdjgfsgm;woormgl/aserigjksjdhasdfgn&#39;</span>
    <span class="l-Scalar-Plain">keyname</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">test</span>
    <span class="l-Scalar-Plain">securitygroup</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">quick-start</span>
    <span class="l-Scalar-Plain">private_key</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/root/test.pem</span>
    <span class="l-Scalar-Plain">location</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ap-southeast-1</span>
    <span class="l-Scalar-Plain">availability_zone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ap-southeast-1b</span>
    <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">aws</span>

  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">myuser@mycorp.com</span>
    <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mypass</span>
    <span class="l-Scalar-Plain">ssh_key_name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mykey</span>
    <span class="l-Scalar-Plain">ssh_key_file</span><span class="p-Indicator">:</span> <span class="s">&#39;/etc/salt/ibm/mykey.pem&#39;</span>
    <span class="l-Scalar-Plain">location</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Raleigh</span>
    <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ibmsce</span>


<span class="l-Scalar-Plain">my-productions-envs</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">extends</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my-develop-envs:ibmsce</span>
    <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">my-production-user@mycorp.com</span>
    <span class="l-Scalar-Plain">location</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">us-east-1</span>
    <span class="l-Scalar-Plain">availability_zone</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">us-east-1</span>
</pre></div>
</div>
<p>The above configuration, once parsed would generate the following providers
data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;providers&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">&#39;my-develop-envs&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s">&#39;availability_zone&#39;</span><span class="p">:</span> <span class="s">&#39;ap-southeast-1b&#39;</span><span class="p">,</span>
         <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="s">&#39;HJGRYCILJLKJYG&#39;</span><span class="p">,</span>
         <span class="s">&#39;key&#39;</span><span class="p">:</span> <span class="s">&#39;kdjgfsgm;woormgl/aserigjksjdhasdfgn&#39;</span><span class="p">,</span>
         <span class="s">&#39;keyname&#39;</span><span class="p">:</span> <span class="s">&#39;test&#39;</span><span class="p">,</span>
         <span class="s">&#39;location&#39;</span><span class="p">:</span> <span class="s">&#39;ap-southeast-1&#39;</span><span class="p">,</span>
         <span class="s">&#39;private_key&#39;</span><span class="p">:</span> <span class="s">&#39;/root/test.pem&#39;</span><span class="p">,</span>
         <span class="s">&#39;provider&#39;</span><span class="p">:</span> <span class="s">&#39;aws&#39;</span><span class="p">,</span>
         <span class="s">&#39;securitygroup&#39;</span><span class="p">:</span> <span class="s">&#39;quick-start&#39;</span>
        <span class="p">},</span>
        <span class="p">{</span><span class="s">&#39;location&#39;</span><span class="p">:</span> <span class="s">&#39;Raleigh&#39;</span><span class="p">,</span>
         <span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="s">&#39;mypass&#39;</span><span class="p">,</span>
         <span class="s">&#39;provider&#39;</span><span class="p">:</span> <span class="s">&#39;ibmsce&#39;</span><span class="p">,</span>
         <span class="s">&#39;ssh_key_file&#39;</span><span class="p">:</span> <span class="s">&#39;/etc/salt/ibm/mykey.pem&#39;</span><span class="p">,</span>
         <span class="s">&#39;ssh_key_name&#39;</span><span class="p">:</span> <span class="s">&#39;mykey&#39;</span><span class="p">,</span>
         <span class="s">&#39;user&#39;</span><span class="p">:</span> <span class="s">&#39;myuser@mycorp.com&#39;</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="s">&#39;my-productions-envs&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s">&#39;availability_zone&#39;</span><span class="p">:</span> <span class="s">&#39;us-east-1&#39;</span><span class="p">,</span>
         <span class="s">&#39;location&#39;</span><span class="p">:</span> <span class="s">&#39;us-east-1&#39;</span><span class="p">,</span>
         <span class="s">&#39;password&#39;</span><span class="p">:</span> <span class="s">&#39;mypass&#39;</span><span class="p">,</span>
         <span class="s">&#39;provider&#39;</span><span class="p">:</span> <span class="s">&#39;ibmsce&#39;</span><span class="p">,</span>
         <span class="s">&#39;ssh_key_file&#39;</span><span class="p">:</span> <span class="s">&#39;/etc/salt/ibm/mykey.pem&#39;</span><span class="p">,</span>
         <span class="s">&#39;ssh_key_name&#39;</span><span class="p">:</span> <span class="s">&#39;mykey&#39;</span><span class="p">,</span>
         <span class="s">&#39;user&#39;</span><span class="p">:</span> <span class="s">&#39;my-production-user@mycorp.com&#39;</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


                    </div>
    <div class="span3">
    <div>

        <p>Current Salt release: <a href="../releases/2014.1.4.html">2014.1.4</a></p>

        <p class="muted">Docs for previous releases on
            <a href="http://salt.readthedocs.org">salt.rtfd.org</a>.</p>
  <h3><a href="../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Core Configuration</a><ul>
<li><a class="reference internal" href="#minion-configuration">Minion Configuration</a></li>
<li><a class="reference internal" href="#new-cloud-configuration-syntax">New Cloud Configuration Syntax</a><ul>
<li><a class="reference internal" href="#migrating-configurations">Migrating Configurations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#cloud-configurations">Cloud Configurations</a><ul>
<li><a class="reference internal" href="#rackspace">Rackspace</a></li>
<li><a class="reference internal" href="#amazon-aws">Amazon AWS</a></li>
<li><a class="reference internal" href="#linode">Linode</a></li>
<li><a class="reference internal" href="#joyent-cloud">Joyent Cloud</a></li>
<li><a class="reference internal" href="#gogrid">GoGrid</a></li>
<li><a class="reference internal" href="#openstack">OpenStack</a></li>
<li><a class="reference internal" href="#digital-ocean">Digital Ocean</a></li>
<li><a class="reference internal" href="#parallels">Parallels</a></li>
<li><a class="reference internal" href="#ibm-smartcloud-enterprise">IBM SmartCloud Enterprise</a></li>
<li><a class="reference internal" href="#saltify">Saltify</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extending-profiles-and-cloud-providers-configuration">Extending Profiles and Cloud Providers Configuration</a><ul>
<li><a class="reference internal" href="#extending-profiles">Extending Profiles</a></li>
<li><a class="reference internal" href="#extending-providers">Extending Providers</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="cloud.html"
                        title="previous chapter">Writing Cloud Provider Modules</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="deploy.html"
                        title="next chapter">OS Support for Cloud VMs</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        <h3>Upcoming SaltStack Events</h3>
        <script src="http://cdn.lanyrd.net/badges/person-v1.min.js"></script>
        <div class="lanyrd-target-splat"><a href="http://lanyrd.com/profile/saltstackinc/" class="lanyrd-splat lanyrd-number-3 lanyrd-context-future" rel="me">My conferences on Lanyrd</a></div>
    </div>
    </div>
                </div>
            </div>
        </div>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="container">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="cloud.html" title="Writing Cloud Provider Modules">previous</a>
                
            </li>
            <li>
                <a href="deploy.html" title="OS Support for Cloud VMs">next</a>
                
            </li>
            <li>
                <a href="../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div></div>
            </div>
        
            <footer>
                <div class="container">
                        <div class="row-fluid">
                                <div class="footerCol">
                                        <h4>About Us</h4>
                                        <a href="http://saltstack.com/">SaltStack</a>
                                        <a href="http://saltstack.com/about/">Leadership</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Products</h4>
                                        <a href="http://saltstack.com/enterprise/">Enterprise</a>
                                        <a href="http://saltstack.com/services/">Integration</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Services</h4>
                                        <a href="http://saltstack.com/training/">Onsite Training</a>
                                        <a href="http://saltstack.com/services/">Custom Professional Services</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Contact Us</h4>
                                        <a href="http://saltstack.com/contact/">Support</a>
                                        <a href="http://saltstack.com/contact/">Contact us</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Community</h4>
                                        <a href="http://saltstack.org">saltstack.org</a>
                                        <a href="http://docs.saltstack.org/en/latest/">Documentation</a>
<!--                                    <a href="#">Blogs</a> -->
                                </div>
                        </div>
                            <div class="row-fluid social">
<!--                                <a href="http://www.facebook.com/SaltStack"><img src="images/socialFB.png" alt="SaltStack on Facebook" /></a> -->
                                    <a href="http://twitter.com/SaltStackInc"><img src="../../_static/images/socialTW.png" alt="SaltStack on Twitter" /></a>
                                    <a href="http://www.linkedin.com/company/salt-stack-inc"><img src="../../_static/images/socialLI.png" alt="SaltStack on LinkedIn" /></a>
<!--                                <a href="http://plus.google.com/114449193225626631691"><img src="images/socialG+.png" alt="SaltStack on Google+" /></a> -->
                                    <a href="https://github.com/saltstack"><img src="../../_static/images/socialGitHub.png" alt="SaltStack on Github" />
                            </div>
                </div>
            </footer>

        <script src="../../_static/js/main.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-26984928-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>

        <script>llactid=23943</script>
        <script src="http://t4.trackalyzer.com/trackalyze.js"></script>
    </body>
</html>