
<!DOCTYPE html>








<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Salt Cloud 0.8.5 Release Notes</title>

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="google-site-verification" content="1Y-ojT3ndjxA9coB77iUDyXPWxeuQ3T4_r0j-QG6QHg" />

        
    
    <link rel="stylesheet" href="../../../_static/css/main.css">
    
    <link rel="stylesheet" href="../../../_static/basic.css">
    <link rel="stylesheet" href="../../../_static/pygments.css">

    <link rel="stylesheet" href="../../../_static/css/bootstrap.css">
    <style>
        body { padding-top: 20px; }
    </style>
    <link rel="stylesheet" href="../../../_static/css/bootstrap-responsive.css">
    <link rel="stylesheet" href="../../../_static/css/main.css">
        
    <script>
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../../',
            VERSION:     '2014.1.4',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
        };
    </script>
    
    <script src="../../../_static/js/vendor/jquery-1.9.1.js"></script>
    
    
    <script src="../../../_static/js/vendor/bootstrap.min.js"></script>
    
    
    
    <script src="../../../_static/underscore.js"></script>
    
    
    <script src="../../../_static/doctools.js"></script>
    
        <link rel="shortcut icon" href="../../../_static/favicon.ico">
        <link rel="top" title="None" href="../../../index.html"> 
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,800italic,300,800' rel='stylesheet' type='text/css'>
        <script src="../../../_static/js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
        
    </head>

    <body class="index">
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        
        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="../../../index.html"><img src="../../../_static/images/SaltStack-Logo.png" /></a>
                    <div class="nav-collapse collapse">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div>
                    </div>
                </div>
            </div>
        </div>
        

        <div class="content row-fluid">
            <div class="container">
                <div class="span12">
                    <div class="span9">
                        
  <div class="section" id="salt-cloud-0-8-5-release-notes">
<h1>Salt Cloud 0.8.5 Release Notes<a class="headerlink" href="#salt-cloud-0-8-5-release-notes" title="Permalink to this headline">¶</a></h1>
<p>Welcome to 0.8.5! Some important things have happened in this release, that
you'll want to take note of. The first thing that may trip you up when
installing directly is that Paramiko is no longer a dependency, and botocore
and sshpass are new dependencies. Read on to see what else has happened.</p>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>The documentation for Salt Cloud can be found on Read the Docs:
<a class="reference external" href="http://salt-cloud.readthedocs.org">http://salt-cloud.readthedocs.org</a></p>
</div>
<div class="section" id="download">
<h2>Download<a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<p>Salt Cloud can be downloaded and install via pypi:</p>
<p><a class="reference external" href="http://pypi.python.org/packages/source/s/salt-cloud/salt-cloud-0.8.5.tar.gz">http://pypi.python.org/packages/source/s/salt-cloud/salt-cloud-0.8.5.tar.gz</a></p>
<p>Some packages have been made available for salt-cloud and more on on their
way. Packages for Arch and FreeBSD are being made available thanks to the
work of Christer Edwards, and packages for RHEL and Fedora are being created
by Clint Savage. The Ubuntu PPA is being managed by Sean Channel. Package
availability will be announced on the salt mailing list.</p>
</div>
<div class="section" id="salt-bootstrap">
<h2>Salt Bootstrap<a class="headerlink" href="#salt-bootstrap" title="Permalink to this headline">¶</a></h2>
<p>In 0.8.4, the default deploy script was set to bootstrap-salt-minion. Since
then, the Salt Boostrap script has been extended to be able to install more
than just minions, and as such, has been renamed. It is now called
bootstrap-salt, and has been renamed in Salt Cloud accordingly. Check out the
salt-bootstrap project for more details:</p>
<p><a class="reference external" href="https://github.com/saltstack/salt-bootstrap">https://github.com/saltstack/salt-bootstrap</a></p>
<p>Just another reminder: For those of you still using &quot;os&quot; in your profiles, this
option was renamed to &quot;script&quot; in 0.8.2, and your configuration should be
updated accordingly.</p>
</div>
<div class="section" id="updating-salt-bootstrap">
<h2>Updating Salt Bootstrap<a class="headerlink" href="#updating-salt-bootstrap" title="Permalink to this headline">¶</a></h2>
<p>If you like running the latest and greatest version of salt-bootstrap, but
you're sick of tracking down the source directory to update it, a new option
has been added to update it for you.</p>
<div class="highlight-bash"><div class="highlight"><pre>salt-cloud -u
salt-cloud --update-bootstrap
</pre></div>
</div>
<p>Bear in mind that this updates to the latest (unstable) version, so use with
caution.</p>
</div>
<div class="section" id="modify-aws-tags">
<h2>Modify AWS Tags<a class="headerlink" href="#modify-aws-tags" title="Permalink to this headline">¶</a></h2>
<p>One of the features of AWS is the ability to tag resources. In fact, under the
hood, the names given to EC2 instances by salt-cloud are actually just stored
as a tag called Name. The ability to manage tags on AWS instances has now been
added to Salt Cloud.</p>
<div class="highlight-bash"><div class="highlight"><pre>salt-cloud -a get_tags mymachine
salt-cloud -a set_tags mymachine <span class="nv">tag1</span><span class="o">=</span>somestuff <span class="nv">tag2</span><span class="o">=</span><span class="s1">&#39;Other stuff&#39;</span>
salt-cloud -a del_tags mymachine tag1,tag2,tag3
</pre></div>
</div>
</div>
<div class="section" id="rename-aws-instances">
<h2>Rename AWS Instances<a class="headerlink" href="#rename-aws-instances" title="Permalink to this headline">¶</a></h2>
<p>As mentioned above, AWS instances are named via a tag. However, renaming an
instance by renaming its tag will cause the salt keys to mismatch. A rename
function has been added which renames both the instance, and the salt keys.</p>
<div class="highlight-bash"><div class="highlight"><pre>salt-cloud -a rename mymachine <span class="nv">newname</span><span class="o">=</span>yourmachine
</pre></div>
</div>
</div>
<div class="section" id="aws-termination-protection">
<h2>AWS Termination Protection<a class="headerlink" href="#aws-termination-protection" title="Permalink to this headline">¶</a></h2>
<p>AWS allows the user to enable and disable termination protection on a specific
instance. An instance with this protection enabled cannot be destroyed.</p>
<div class="highlight-bash"><div class="highlight"><pre>salt-cloud -a enable_term_protect mymachine
salt-cloud -a disable_term_protect mymachine
</pre></div>
</div>
</div>
<div class="section" id="setting-up-new-salt-masters">
<h2>Setting up New Salt Masters<a class="headerlink" href="#setting-up-new-salt-masters" title="Permalink to this headline">¶</a></h2>
<p>It has become increasingly common for users to set up multi-hierarchal
infrastructures using Salt Cloud. This sometimes involves setting up an
instance to be a master in addition to a minion. With that in mind, you can
now law down master configuration on a machine by specifying master options
in the profile or map file.</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">make_master</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
</pre></div>
</div>
<p>This will cause Salt Cloud to generate master keys for the instance, and tell
salt-bootstrap to install the salt-master package, in addition to the
salt-minion package.</p>
<p>The default master configuration is usually appropriate for most users, and
will not be changed unless specific master configuration has been added to the
profile or map:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">master</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">root</span>
    <span class="l-Scalar-Plain">interface</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">0.0.0.0</span>
</pre></div>
</div>
</div>
<div class="section" id="keeping-tmp-files">
<h2>Keeping /tmp/ Files<a class="headerlink" href="#keeping-tmp-files" title="Permalink to this headline">¶</a></h2>
<p>When Salt Cloud deploys an instance, it uploads temporary files to /tmp/ for
salt-bootstrap to put in place. After the script has run, they are deleted. To
keep these files around (mostly for debugging purposes), the --keep-tmp option
can be added:</p>
<div class="highlight-bash"><div class="highlight"><pre>salt-cloud -p myprofile mymachine --keep-tmp
</pre></div>
</div>
<p>For those wondering why /tmp/ was used instead of /root/, this had to be done
for images which require the use of sudo, and therefore do not allow remote
root logins, even for file transfers (which makes /root/ unavailable).</p>
</div>
<div class="section" id="deploy-script-arguments">
<h2>Deploy Script Arguments<a class="headerlink" href="#deploy-script-arguments" title="Permalink to this headline">¶</a></h2>
<p>Custom deploy scripts are unlikely to need custom arguments to be passed to
them, but salt-bootstrap has been extended quite a bit, and this may be
necessary. script_args can be specified in either the profile or the map
file, to pass arguments to the deploy script:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">aws-amazon</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">provider</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">aws</span>
    <span class="l-Scalar-Plain">image</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ami-1624987f</span>
    <span class="l-Scalar-Plain">size</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Micro Instance</span>
    <span class="l-Scalar-Plain">ssh_username</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ec2-user</span>
    <span class="l-Scalar-Plain">script</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">bootstrap-salt</span>
    <span class="l-Scalar-Plain">script_args</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">-c /tmp/</span>
</pre></div>
</div>
<p>This has also been tested to work with pipes, if needed:</p>
<div class="highlight-yaml"><pre>script_args: | head</pre>
</div>
</div>
<div class="section" id="remove-old-ssh-keys">
<h2>Remove Old SSH Keys<a class="headerlink" href="#remove-old-ssh-keys" title="Permalink to this headline">¶</a></h2>
<p>When an instance is destroyed, its IP address is usually recycled back into
the IP pool. When such an IP is reassigned to you, and the old key is still in
your known_hosts file, the deploy script will fail due to mismatched SSH keys.
To mitigate this, add the following to your main cloud configuration:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="l-Scalar-Plain">delete_sshkeys</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
</pre></div>
</div>
</div>
</div>


                    </div>
    <div class="span3">
    <div>

        <p>Current Salt release: <a href="../../releases/2014.1.4.html">2014.1.4</a></p>

        <p class="muted">Docs for previous releases on
            <a href="http://salt.readthedocs.org">salt.rtfd.org</a>.</p>
  <h3><a href="../../../contents.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Salt Cloud 0.8.5 Release Notes</a><ul>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
<li><a class="reference internal" href="#download">Download</a></li>
<li><a class="reference internal" href="#salt-bootstrap">Salt Bootstrap</a></li>
<li><a class="reference internal" href="#updating-salt-bootstrap">Updating Salt Bootstrap</a></li>
<li><a class="reference internal" href="#modify-aws-tags">Modify AWS Tags</a></li>
<li><a class="reference internal" href="#rename-aws-instances">Rename AWS Instances</a></li>
<li><a class="reference internal" href="#aws-termination-protection">AWS Termination Protection</a></li>
<li><a class="reference internal" href="#setting-up-new-salt-masters">Setting up New Salt Masters</a></li>
<li><a class="reference internal" href="#keeping-tmp-files">Keeping /tmp/ Files</a></li>
<li><a class="reference internal" href="#deploy-script-arguments">Deploy Script Arguments</a></li>
<li><a class="reference internal" href="#remove-old-ssh-keys">Remove Old SSH Keys</a></li>
</ul>
</li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        <h3>Upcoming SaltStack Events</h3>
        <script src="http://cdn.lanyrd.net/badges/person-v1.min.js"></script>
        <div class="lanyrd-target-splat"><a href="http://lanyrd.com/profile/saltstackinc/" class="lanyrd-splat lanyrd-number-3 lanyrd-context-future" rel="me">My conferences on Lanyrd</a></div>
    </div>
    </div>
                </div>
            </div>
        </div>
            <div class="navbar navbar-inverse navbar-fixed-top">
                <div class="container">
    <div class="related">
        

        <ul class="nav rel-extra">
            <li>
                <a href="../../../salt-modindex.html" title="Salt Module Index">all salt modules</a>
                
            </li>
            <li>
                <a href="../../../genindex.html" title="General Index">index</a>
                
            </li> 
        </ul>
    </div></div>
            </div>
        
            <footer>
                <div class="container">
                        <div class="row-fluid">
                                <div class="footerCol">
                                        <h4>About Us</h4>
                                        <a href="http://saltstack.com/">SaltStack</a>
                                        <a href="http://saltstack.com/about/">Leadership</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Products</h4>
                                        <a href="http://saltstack.com/enterprise/">Enterprise</a>
                                        <a href="http://saltstack.com/services/">Integration</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Services</h4>
                                        <a href="http://saltstack.com/training/">Onsite Training</a>
                                        <a href="http://saltstack.com/services/">Custom Professional Services</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Contact Us</h4>
                                        <a href="http://saltstack.com/contact/">Support</a>
                                        <a href="http://saltstack.com/contact/">Contact us</a>
                                </div>
                                <div class="footerCol">
                                        <h4>Community</h4>
                                        <a href="http://saltstack.org">saltstack.org</a>
                                        <a href="http://docs.saltstack.org/en/latest/">Documentation</a>
<!--                                    <a href="#">Blogs</a> -->
                                </div>
                        </div>
                            <div class="row-fluid social">
<!--                                <a href="http://www.facebook.com/SaltStack"><img src="images/socialFB.png" alt="SaltStack on Facebook" /></a> -->
                                    <a href="http://twitter.com/SaltStackInc"><img src="../../../_static/images/socialTW.png" alt="SaltStack on Twitter" /></a>
                                    <a href="http://www.linkedin.com/company/salt-stack-inc"><img src="../../../_static/images/socialLI.png" alt="SaltStack on LinkedIn" /></a>
<!--                                <a href="http://plus.google.com/114449193225626631691"><img src="images/socialG+.png" alt="SaltStack on Google+" /></a> -->
                                    <a href="https://github.com/saltstack"><img src="../../../_static/images/socialGitHub.png" alt="SaltStack on Github" />
                            </div>
                </div>
            </footer>

        <script src="../../../_static/js/main.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-26984928-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>

        <script>llactid=23943</script>
        <script src="http://t4.trackalyzer.com/trackalyze.js"></script>
    </body>
</html>